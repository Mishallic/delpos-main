{"version":3,"file":"index.js","sources":["../src/shared.js","../src/Emitter/Emitter.js","../src/utils/supportedTransform.js","../src/utils/getStyle.js","../src/utils/getStyleName.js","../src/utils/setStyles.js","../src/Item/ItemAnimate.js","../node_modules/hammerjs/hammer.js","../src/Ticker/Ticker.js","../src/ticker.js","../src/utils/elementMatches.js","../src/utils/addClass.js","../src/utils/normalizeArrayIndex.js","../src/utils/arrayMove.js","../src/utils/arraySwap.js","../src/utils/debounce.js","../src/utils/isTransformed.js","../src/utils/getContainingBlock.js","../src/utils/getStyleAsFloat.js","../src/utils/getOffsetDiff.js","../src/utils/getTranslate.js","../src/utils/getTranslateString.js","../src/utils/arrayInsert.js","../src/utils/isPlainObject.js","../src/utils/removeClass.js","../src/Item/ItemDrag.js","../src/Queue/Queue.js","../src/Item/ItemLayout.js","../src/Item/ItemMigrate.js","../src/Item/ItemRelease.js","../src/utils/getCurrentStyles.js","../src/Item/ItemVisibility.js","../src/utils/createUid.js","../src/Item/Item.js","../src/Packer/Packer.js","../src/utils/isNodeList.js","../src/utils/toArray.js","../src/Grid/Grid.js","../src/index.js"],"sourcesContent":["/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nexport const namespace = 'Muuri';\r\nexport const gridInstances = {};\r\n\r\nexport const eventSynchronize = 'synchronize';\r\nexport const eventLayoutStart = 'layoutStart';\r\nexport const eventLayoutEnd = 'layoutEnd';\r\nexport const eventAdd = 'add';\r\nexport const eventRemove = 'remove';\r\nexport const eventShowStart = 'showStart';\r\nexport const eventShowEnd = 'showEnd';\r\nexport const eventHideStart = 'hideStart';\r\nexport const eventHideEnd = 'hideEnd';\r\nexport const eventFilter = 'filter';\r\nexport const eventSort = 'sort';\r\nexport const eventMove = 'move';\r\nexport const eventSend = 'send';\r\nexport const eventBeforeSend = 'beforeSend';\r\nexport const eventReceive = 'receive';\r\nexport const eventBeforeReceive = 'beforeReceive';\r\nexport const eventDragInit = 'dragInit';\r\nexport const eventDragStart = 'dragStart';\r\nexport const eventDragMove = 'dragMove';\r\nexport const eventDragScroll = 'dragScroll';\r\nexport const eventDragEnd = 'dragEnd';\r\nexport const eventDragReleaseStart = 'dragReleaseStart';\r\nexport const eventDragReleaseEnd = 'dragReleaseEnd';\r\nexport const eventDestroy = 'destroy';\r\n","/**\r\n * Muuri Emitter\r\n * Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/src/Emitter/LICENSE.md\r\n */\r\nimport { Component } from 'react';\r\n\r\n/**\r\n * Event emitter constructor.\r\n *\r\n * @class\r\n */\r\nclass Emitter extends Component {\r\n  constructor() {\r\n    super();\r\n    this._events = {};\r\n    this._queue = [];\r\n    this._counter = 0;\r\n    this._isDestroyed = false;\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Bind an event listener.\r\n   *\r\n   * @public\r\n   * @memberof Emitter.prototype\r\n   * @param {String} event\r\n   * @param {Function} listener\r\n   * @returns {Emitter}\r\n   */\r\n  on(event, listener) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    // Get listeners queue and create it if it does not exist.\r\n    let listeners = this._events[event];\r\n    if (!listeners) listeners = this._events[event] = [];\r\n\r\n    // Add the listener to the queue.\r\n    listeners.push(listener);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Bind an event listener that is triggered only once.\r\n   *\r\n   * @public\r\n   * @memberof Emitter.prototype\r\n   * @param {String} event\r\n   * @param {Function} listener\r\n   * @returns {Emitter}\r\n   */\r\n  once(event, listener) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const callback = function() {\r\n      this.off(event, callback);\r\n      listener(...arguments);\r\n    }.bind(this);\r\n\r\n    return this.on(event, callback);\r\n  }\r\n\r\n  /**\r\n   * Unbind all event listeners that match the provided listener function.\r\n   *\r\n   * @public\r\n   * @memberof Emitter.prototype\r\n   * @param {String} event\r\n   * @param {Function} [listener]\r\n   * @returns {Emitter}\r\n   */\r\n  off(event, listener) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    // Get listeners and return immediately if none is found.\r\n    const listeners = this._events[event];\r\n    if (!listeners || !listeners.length) return this;\r\n\r\n    // If no specific listener is provided remove all listeners.\r\n    if (!listener) {\r\n      listeners.length = 0;\r\n      return this;\r\n    }\r\n\r\n    // Remove all matching listeners.\r\n    let i = listeners.length;\r\n    while (i--) {\r\n      if (listener === listeners[i]) listeners.splice(i, 1);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Emit all listeners in a specified event with the provided arguments.\r\n   *\r\n   * @public\r\n   * @memberof Emitter.prototype\r\n   * @param {String} event\r\n   * @param {*} [arg1]\r\n   * @param {*} [arg2]\r\n   * @param {*} [arg3]\r\n   * @returns {Emitter}\r\n   */\r\n  emit(event, arg1, arg2, arg3) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    // Get event listeners and quit early if there's no listeners.\r\n    const listeners = this._events[event];\r\n    if (!listeners || !listeners.length) return this;\r\n\r\n    const queue = this._queue;\r\n    let qLength = queue.length;\r\n    const aLength = arguments.length - 1;\r\n    let i;\r\n\r\n    // Add the current listeners to the callback queue before we process them.\r\n    // This is necessary to guarantee that all of the listeners are called in\r\n    // correct order even if new event listeners are removed/added during\r\n    // processing and/or events are emitted during processing.\r\n    for (i = 0; i < listeners.length; i++) {\r\n      queue.push(listeners[i]);\r\n    }\r\n\r\n    // Increment queue counter. This is needed for the scenarios where emit is\r\n    // triggered while the queue is already processing. We need to keep track of\r\n    // how many \"queue processors\" there are active so that we can safely reset\r\n    // the queue in the end when the last queue processor is finished.\r\n    ++this._counter;\r\n\r\n    // Process the queue (the specific part of it for this emit).\r\n    for (i = qLength, qLength = queue.length; i < qLength; i++) {\r\n      // prettier-ignore\r\n      aLength === 0 ? queue[i]() : // eslint-disable-line\r\n      aLength === 1 ? queue[i](arg1) : // eslint-disable-line\r\n      aLength === 2 ? queue[i](arg1, arg2) : // eslint-disable-line\r\n                      queue[i](arg1, arg2, arg3); // eslint-disable-line\r\n\r\n      // Stop processing if the emitter is destroyed.\r\n      if (this._isDestroyed) return this;\r\n    }\r\n\r\n    // Decrement queue process counter.\r\n    --this._counter;\r\n\r\n    // Reset the queue if there are no more queue processes running.\r\n    if (!this._counter) queue.length = 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy emitter instance. Basically just removes all bound listeners.\r\n   *\r\n   * @public\r\n   * @memberof Emitter.prototype\r\n   * @returns {Emitter}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const events = this._events;\r\n    let event;\r\n\r\n    // Flag as destroyed.\r\n    this._isDestroyed = true;\r\n\r\n    // Reset queue (if queue is currently processing this will also stop that).\r\n    this._queue.length = this._counter = 0;\r\n\r\n    // Remove all listeners.\r\n    for (event in events) {\r\n      if (events[event]) {\r\n        events[event].length = 0;\r\n        events[event] = undefined;\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Emitter;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\n// Set up the default export values.\r\nexport let isTransformSupported = false;\r\nexport let transformStyle = 'transform';\r\nexport let transformProp = 'transform';\r\n\r\n// Find the supported transform prop and style names.\r\nconst style = 'transform';\r\nconst styleCap = 'Transform';\r\n['', 'Webkit', 'Moz', 'O', 'ms'].forEach(function(prefix) {\r\n  if (isTransformSupported) return;\r\n  const propName = prefix ? prefix + styleCap : style;\r\n  if (document.documentElement.style[propName] !== undefined) {\r\n    prefix = prefix.toLowerCase();\r\n    transformStyle = prefix ? '-' + prefix + '-' + style : style;\r\n    transformProp = propName;\r\n    isTransformSupported = true;\r\n  }\r\n});\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { transformStyle } from './supportedTransform.js';\r\n\r\nconst stylesCache = typeof WeakMap === 'function' ? new WeakMap() : null;\r\n\r\n/**\r\n * Returns the computed value of an element's style property as a string.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} style\r\n * @returns {String}\r\n */\r\nexport default function getStyle(element, style) {\r\n  let styles = stylesCache && stylesCache.get(element);\r\n  if (!styles) {\r\n    styles = window.getComputedStyle(element, null);\r\n    stylesCache && stylesCache.set(element, styles);\r\n  }\r\n  return styles.getPropertyValue(style === 'transform' ? transformStyle : style);\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst styleNameRegEx = /([A-Z])/g;\r\n\r\n/**\r\n * Transforms a camel case style property to kebab case style property.\r\n *\r\n * @param {String} string\r\n * @returns {String}\r\n */\r\nexport default function getStyleName(string) {\r\n  return string.replace(styleNameRegEx, '-$1').toLowerCase();\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { transformProp } from './supportedTransform.js';\r\n\r\n/**\r\n * Set inline styles to an element.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {Object} styles\r\n */\r\nexport default function setStyles(element, styles) {\r\n  for (const prop in styles) {\r\n    element.style[prop === 'transform' ? transformProp : prop] = styles[prop];\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\nimport getStyle from '../utils/getStyle.js';\r\nimport getStyleName from '../utils/getStyleName.js';\r\nimport setStyles from '../utils/setStyles.js';\r\nimport { transformProp } from '../utils/supportedTransform.js';\r\n\r\n/**\r\n * Item animation handler powered by Web Animations API.\r\n *\r\n * @class\r\n * @param {HTMLElement} element\r\n */\r\nclass ItemAnimate extends Component {\r\n  constructor(element) {\r\n    super(element);\r\n    this._element = element;\r\n    this._animation = null;\r\n    this._callback = null;\r\n    this._props = [];\r\n    this._values = [];\r\n    this._keyframes = [];\r\n    this._options = {};\r\n    this._isDestroyed = false;\r\n    this._onFinish = this._onFinish.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Start instance's animation. Automatically stops current animation if it is\r\n   * running.\r\n   *\r\n   * @public\r\n   * @memberof ItemAnimate.prototype\r\n   * @param {Object} propsFrom\r\n   * @param {Object} propsTo\r\n   * @param {Object} [options]\r\n   * @param {Number} [options.duration=300]\r\n   * @param {String} [options.easing='ease']\r\n   * @param {Function} [options.onFinish]\r\n   */\r\n  start(propsFrom, propsTo, options) {\r\n    if (this._isDestroyed) return;\r\n\r\n    let animation = this._animation;\r\n    const currentProps = this._props;\r\n    const currentValues = this._values;\r\n    const opts = options || 0;\r\n    let cancelAnimation = false;\r\n\r\n    // If we have an existing animation running, let's check if it needs to be\r\n    // cancelled or if it can continue running.\r\n    if (animation) {\r\n      let propCount = 0;\r\n      let propIndex;\r\n\r\n      // Check if the requested animation target props and values match with the\r\n      // current props and values.\r\n      for (const propName in propsTo) {\r\n        ++propCount;\r\n        propIndex = currentProps.indexOf(propName);\r\n        if (propIndex === -1 || propsTo[propName] !== currentValues[propIndex]) {\r\n          cancelAnimation = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Check if the target props count matches current props count. This is\r\n      // needed for the edge case scenario where target props contain the same\r\n      // styles as current props, but the current props have some additional\r\n      // props.\r\n      if (!cancelAnimation && propCount !== currentProps.length) {\r\n        cancelAnimation = true;\r\n      }\r\n    }\r\n\r\n    // Cancel animation (if required).\r\n    if (cancelAnimation) animation.cancel();\r\n\r\n    // Store animation callback.\r\n    this._callback = typeof opts.onFinish === 'function' ? opts.onFinish : null;\r\n\r\n    // If we have a running animation that does not need to be cancelled, let's\r\n    // call it a day here and let it run.\r\n    if (animation && !cancelAnimation) return;\r\n\r\n    // Store target props and values to instance.\r\n    currentProps.length = currentValues.length = 0;\r\n    for (const propName in propsTo) {\r\n      currentProps.push(propName);\r\n      currentValues.push(propsTo[propName]);\r\n    }\r\n\r\n    // Set up keyframes.\r\n    const animKeyframes = this._keyframes;\r\n    animKeyframes[0] = propsFrom;\r\n    animKeyframes[1] = propsTo;\r\n\r\n    // Set up options.\r\n    const animOptions = this._options;\r\n    animOptions.duration = opts.duration || 300;\r\n    animOptions.easing = opts.easing || 'ease';\r\n\r\n    // Start the animation\r\n    const element = this._element;\r\n    animation = element.animate(animKeyframes, animOptions);\r\n    animation.onfinish = this._onFinish;\r\n    this._animation = animation;\r\n\r\n    // Set the end styles. This makes sure that the element stays at the end\r\n    // values after animation is finished.\r\n    setStyles(element, propsTo);\r\n  }\r\n\r\n  /**\r\n   * Stop instance's current animation if running.\r\n   *\r\n   * @public\r\n   * @memberof ItemAnimate.prototype\r\n   * @param {Object} [styles]\r\n   */\r\n  stop(styles) {\r\n    if (this._isDestroyed || !this._animation) return;\r\n\r\n    const element = this._element;\r\n    const currentProps = this._props;\r\n    const currentValues = this._values;\r\n    let propName;\r\n    let propValue;\r\n    let i;\r\n\r\n    // Calculate (if not provided) and set styles.\r\n    if (!styles) {\r\n      for (i = 0; i < currentProps.length; i++) {\r\n        propName = currentProps[i];\r\n        propValue = getStyle(element, getStyleName(propName));\r\n        element.style[propName === 'transform' ? transformProp : propName] = propValue;\r\n      }\r\n    } else {\r\n      setStyles(element, styles);\r\n    }\r\n\r\n    //  Cancel animation.\r\n    this._animation.cancel();\r\n    this._animation = this._callback = null;\r\n\r\n    // Reset current props and values.\r\n    currentProps.length = currentValues.length = 0;\r\n  }\r\n\r\n  /**\r\n   * Check if the item is being animated currently.\r\n   *\r\n   * @public\r\n   * @memberof ItemAnimate.prototype\r\n   * @return {Boolean}\r\n   */\r\n  isAnimating() {\r\n    return !!this._animation;\r\n  }\r\n\r\n  /**\r\n   * Destroy the instance and stop current animation if it is running.\r\n   *\r\n   * @public\r\n   * @memberof ItemAnimate.prototype\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return;\r\n    this.stop();\r\n    this._element = this._options = this._keyframes = null;\r\n    this._isDestroyed = true;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Animation end handler.\r\n   *\r\n   * @private\r\n   * @memberof ItemAnimate.prototype\r\n   */\r\n  _onFinish() {\r\n    const callback = this._callback;\r\n    this._animation = this._callback = null;\r\n    this._props.length = this._values.length = 0;\r\n    callback && callback();\r\n  }\r\n}\r\n\r\nexport default ItemAnimate;\r\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","/**\r\n * Muuri Ticker\r\n * Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/src/Ticker/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\nfunction rafFallback(cb) {\r\n  return window.setTimeout(cb, 16);\r\n}\r\n\r\nconst raf = (\r\n  window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame ||\r\n  window.mozRequestAnimationFrame ||\r\n  window.msRequestAnimationFrame ||\r\n  rafFallback\r\n).bind(window);\r\n\r\n/**\r\n * A ticker system for handling DOM reads and writes in an efficient way.\r\n * Contains a read queue and a write queue that are processed on the next\r\n * animation frame when needed.\r\n *\r\n * @class\r\n */\r\nclass Ticker extends Component {\r\n  constructor() {\r\n    super();\r\n    this._nextTick = null;\r\n\r\n    this._queue = [];\r\n    this._reads = {};\r\n    this._writes = {};\r\n\r\n    this._batch = [];\r\n    this._batchReads = {};\r\n    this._batchWrites = {};\r\n\r\n    this._flush = this._flush.bind(this);\r\n  }\r\n\r\n  add(id, readCallback, writeCallback, isImportant) {\r\n    // First, let's check if an item has been added to the queues with the same id\r\n    // and if so -> remove it.\r\n    const currentIndex = this._queue.indexOf(id);\r\n    if (currentIndex > -1) this._queue[currentIndex] = undefined;\r\n\r\n    // Add all important callbacks to the beginning of the queue and other\r\n    // callbacks to the end of the queue.\r\n    isImportant ? this._queue.unshift(id) : this._queue.push(id);\r\n\r\n    // Store callbacks.\r\n    this._reads[id] = readCallback;\r\n    this._writes[id] = writeCallback;\r\n\r\n    // Finally, let's kick-start the next tick if it is not running yet.\r\n    if (!this._nextTick) this._nextTick = raf(this._flush);\r\n  }\r\n\r\n  cancel(id) {\r\n    const currentIndex = this._queue.indexOf(id);\r\n    if (currentIndex > -1) {\r\n      this._queue[currentIndex] = undefined;\r\n      this._reads[id] = undefined;\r\n      this._writes[id] = undefined;\r\n    }\r\n  }\r\n\r\n  _flush() {\r\n    const queue = this._queue;\r\n    const reads = this._reads;\r\n    const writes = this._writes;\r\n    const batch = this._batch;\r\n    const batchReads = this._batchReads;\r\n    const batchWrites = this._batchWrites;\r\n    const length = queue.length;\r\n    let id;\r\n    let i;\r\n\r\n    // Reset ticker.\r\n    this._nextTick = null;\r\n\r\n    // Setup queues and callback placeholders.\r\n    for (i = 0; i < length; i++) {\r\n      id = queue[i];\r\n      if (!id) continue;\r\n\r\n      batch.push(id);\r\n\r\n      batchReads[id] = reads[id];\r\n      reads[id] = undefined;\r\n\r\n      batchWrites[id] = writes[id];\r\n      writes[id] = undefined;\r\n    }\r\n\r\n    // Reset queue.\r\n    queue.length = 0;\r\n\r\n    // Process read callbacks.\r\n    for (i = 0; i < length; i++) {\r\n      id = batch[i];\r\n      if (batchReads[id]) {\r\n        batchReads[id]();\r\n        batchReads[id] = undefined;\r\n      }\r\n    }\r\n\r\n    // Process write callbacks.\r\n    for (i = 0; i < length; i++) {\r\n      id = batch[i];\r\n      if (batchWrites[id]) {\r\n        batchWrites[id]();\r\n        batchWrites[id] = undefined;\r\n      }\r\n    }\r\n\r\n    // Reset batch.\r\n    batch.length = 0;\r\n\r\n    // Restart the ticker if needed.\r\n    if (!this._nextTick && queue.length) {\r\n      this._nextTick = raf(this._flush);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Ticker;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport Ticker from './Ticker/Ticker.js';\r\n\r\nconst ticker = new Ticker();\r\n\r\nconst layoutTick = 'layout';\r\nconst visibilityTick = 'visibility';\r\nconst moveTick = 'move';\r\nconst scrollTick = 'scroll';\r\n\r\nexport default ticker;\r\n\r\nexport function addLayoutTick(itemId, readCallback, writeCallback) {\r\n  return ticker.add(itemId + layoutTick, readCallback, writeCallback);\r\n};\r\n\r\nexport function cancelLayoutTick(itemId) {\r\n  return ticker.cancel(itemId + layoutTick);\r\n};\r\n\r\nexport function addVisibilityTick(itemId, readCallback, writeCallback) {\r\n  return ticker.add(itemId + visibilityTick, readCallback, writeCallback);\r\n};\r\n\r\nexport function cancelVisibilityTick(itemId) {\r\n  return ticker.cancel(itemId + visibilityTick);\r\n};\r\n\r\nexport function addMoveTick(itemId, readCallback, writeCallback) {\r\n  return ticker.add(itemId + moveTick, readCallback, writeCallback, true);\r\n};\r\n\r\nexport function cancelMoveTick(itemId) {\r\n  return ticker.cancel(itemId + moveTick);\r\n};\r\n\r\nexport function addScrollTick(itemId, readCallback, writeCallback) {\r\n  return ticker.add(itemId + scrollTick, readCallback, writeCallback, true);\r\n};\r\n\r\nexport function cancelScrollTick(itemId) {\r\n  return ticker.cancel(itemId + scrollTick);\r\n};\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst proto = Element.prototype;\r\nconst matches =\r\n  proto.matches ||\r\n  proto.matchesSelector ||\r\n  proto.webkitMatchesSelector ||\r\n  proto.mozMatchesSelector ||\r\n  proto.msMatchesSelector ||\r\n  proto.oMatchesSelector;\r\n\r\n/**\r\n * Check if element matches a CSS selector.\r\n *\r\n * @param {*} val\r\n * @returns {Boolean}\r\n */\r\nexport default function elementMatches(el, selector) {\r\n  return matches.call(el, selector);\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport elementMatches from './elementMatches.js';\r\n\r\n/**\r\n * Add class to an element.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} className\r\n */\r\nfunction addClassModern(element, className) {\r\n  element.classList.add(className);\r\n}\r\n\r\n/**\r\n * Add class to an element (legacy version, for IE9 support).\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} className\r\n */\r\nfunction addClassLegacy(element, className) {\r\n  if (!elementMatches(element, `.${className}`)) {\r\n    element.className += ` ${className}`;\r\n  }\r\n}\r\n\r\nexport default ('classList' in Element.prototype ? addClassModern : addClassLegacy);\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\n/**\r\n * Normalize array index. Basically this function makes sure that the provided\r\n * array index is within the bounds of the provided array and also transforms\r\n * negative index to the matching positive index.\r\n *\r\n * @param {Array} array\r\n * @param {Number} index\r\n * @param {Boolean} isMigration\r\n */\r\nexport default function normalizeArrayIndex(array, index, isMigration) {\r\n  const length = array.length;\r\n  const maxIndex = Math.max(0, isMigration ? length : length - 1);\r\n  return index > maxIndex ? maxIndex : index < 0 ? Math.max(maxIndex + index + 1, 0) : index;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport normalizeArrayIndex from './normalizeArrayIndex.js';\r\n\r\n/**\r\n * Move array item to another index.\r\n *\r\n * @param {Array} array\r\n * @param {Number} fromIndex\r\n *   - Index (positive or negative) of the item that will be moved.\r\n * @param {Number} toIndex\r\n *   - Index (positive or negative) where the item should be moved to.\r\n */\r\nexport default function arrayMove(array, fromIndex, toIndex) {\r\n  // Make sure the array has two or more items.\r\n  if (array.length < 2) return;\r\n\r\n  // Normalize the indices.\r\n  const from = normalizeArrayIndex(array, fromIndex);\r\n  const to = normalizeArrayIndex(array, toIndex);\r\n\r\n  // Add target item to the new position.\r\n  if (from !== to) {\r\n    array.splice(to, 0, array.splice(from, 1)[0]);\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport normalizeArrayIndex from './normalizeArrayIndex.js';\r\n\r\n/**\r\n * Swap array items.\r\n *\r\n * @param {Array} array\r\n * @param {Number} index\r\n *   - Index (positive or negative) of the item that will be swapped.\r\n * @param {Number} withIndex\r\n *   - Index (positive or negative) of the other item that will be swapped.\r\n */\r\nexport default function arraySwap(array, index, withIndex) {\r\n  // Make sure the array has two or more items.\r\n  if (array.length < 2) return;\r\n\r\n  // Normalize the indices.\r\n  const indexA = normalizeArrayIndex(array, index);\r\n  const indexB = normalizeArrayIndex(array, withIndex);\r\n  let temp;\r\n\r\n  // Swap the items.\r\n  if (indexA !== indexB) {\r\n    temp = array[indexA];\r\n    array[indexA] = array[indexB];\r\n    array[indexB] = temp;\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst actionCancel = 'cancel';\r\nconst actionFinish = 'finish';\r\n\r\n/**\r\n * Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds. The returned function accepts one argument which, when\r\n * being \"finish\", calls the debounce function immediately if it is currently\r\n * waiting to be called, and when being \"cancel\" cancels the currently queued\r\n * function call.\r\n *\r\n * @param {Function} fn\r\n * @param {Number} wait\r\n * @returns {Function}\r\n */\r\nexport default function debounce(fn, wait) {\r\n  let timeout;\r\n\r\n  if (wait > 0) {\r\n    return function(action) {\r\n      if (timeout !== undefined) {\r\n        timeout = window.clearTimeout(timeout);\r\n        if (action === actionFinish) fn();\r\n      }\r\n\r\n      if (action !== actionCancel && action !== actionFinish) {\r\n        timeout = window.setTimeout(function() {\r\n          timeout = undefined;\r\n          fn();\r\n        }, wait);\r\n      }\r\n    };\r\n  }\r\n\r\n  return function(action) {\r\n    if (action !== actionCancel) fn();\r\n  };\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getStyle from './getStyle.js';\r\n\r\n/**\r\n * Returns true if element is transformed, false if not. In practice the\r\n * element's display value must be anything else than \"none\" or \"inline\" as\r\n * well as have a valid transform value applied in order to be counted as a\r\n * transformed element.\r\n *\r\n * Borrowed from Mezr (v0.6.1):\r\n * https://github.com/niklasramo/mezr/blob/0.6.1/mezr.js#L661\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {Boolean}\r\n */\r\nexport default function isTransformed(element) {\r\n  const transform = getStyle(element, 'transform');\r\n  if (!transform || transform === 'none') return false;\r\n\r\n  const display = getStyle(element, 'display');\r\n  if (display === 'inline' || display === 'none') return false;\r\n\r\n  return true;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getStyle from './getStyle.js';\r\nimport isTransformed from './isTransformed';\r\n\r\n/**\r\n * Returns an absolute positioned element's containing block, which is\r\n * considered to be the closest ancestor element that the target element's\r\n * positioning is relative to. Disclaimer: this only works as intended for\r\n * absolute positioned elements.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {Boolean} [includeSelf=false]\r\n *   - When this is set to true the containing block checking is started from\r\n *     the provided element. Otherwise the checking is started from the\r\n *     provided element's parent element.\r\n * @returns {(Document|Element)}\r\n */\r\nexport default function getContainingBlock(element, includeSelf) {\r\n  // As long as the containing block is an element, static and not\r\n  // transformed, try to get the element's parent element and fallback to\r\n  // document. https://github.com/niklasramo/mezr/blob/0.6.1/mezr.js#L339\r\n  let ret = (includeSelf ? element : element.parentElement) || document;\r\n  while (ret && ret !== document && getStyle(ret, 'position') === 'static' && !isTransformed(ret)) {\r\n    ret = ret.parentElement || document;\r\n  }\r\n  return ret;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getStyle from './getStyle.js';\r\n\r\n/**\r\n * Returns the computed value of an element's style property transformed into\r\n * a float value.\r\n *\r\n * @param {HTMLElement} el\r\n * @param {String} style\r\n * @returns {Number}\r\n */\r\nexport default function getStyleAsFloat(el, style) {\r\n  return parseFloat(getStyle(el, style)) || 0;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getContainingBlock from './getContainingBlock.js';\r\nimport getStyleAsFloat from './getStyleAsFloat.js';\r\n\r\nconst offsetA = {};\r\nconst offsetB = {};\r\nconst offsetDiff = {};\r\n\r\n/**\r\n * Returns the element's document offset, which in practice means the vertical\r\n * and horizontal distance between the element's northwest corner and the\r\n * document's northwest corner. Note that this function always returns the same\r\n * object so be sure to read the data from it instead using it as a reference.\r\n *\r\n * @param {(Document|Element|Window)} element\r\n * @param {Object} [offsetData]\r\n *   - Optional data object where the offset data will be inserted to. If not\r\n *     provided a new object will be created for the return data.\r\n * @returns {Object}\r\n */\r\nfunction getOffset(element, offsetData) {\r\n  const ret = offsetData || {};\r\n  let rect;\r\n\r\n  // Set up return data.\r\n  ret.left = 0;\r\n  ret.top = 0;\r\n\r\n  // Document's offsets are always 0.\r\n  if (element === document) return ret;\r\n\r\n  // Add viewport scroll left/top to the respective offsets.\r\n  ret.left = window.pageXOffset || 0;\r\n  ret.top = window.pageYOffset || 0;\r\n\r\n  // Window's offsets are the viewport scroll left/top values.\r\n  if (element.self === window.self) return ret;\r\n\r\n  // Add element's client rects to the offsets.\r\n  rect = element.getBoundingClientRect();\r\n  ret.left += rect.left;\r\n  ret.top += rect.top;\r\n\r\n  // Exclude element's borders from the offset.\r\n  ret.left += getStyleAsFloat(element, 'border-left-width');\r\n  ret.top += getStyleAsFloat(element, 'border-top-width');\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Calculate the offset difference two elements.\r\n *\r\n * @param {HTMLElement} elemA\r\n * @param {HTMLElement} elemB\r\n * @param {Boolean} [compareContainingBlocks=false]\r\n *   - When this is set to true the containing blocks of the provided elements\r\n *     will be used for calculating the difference. Otherwise the provided\r\n *     elements will be compared directly.\r\n * @returns {Object}\r\n */\r\nexport default function getOffsetDiff(elemA, elemB, compareContainingBlocks) {\r\n  offsetDiff.left = 0;\r\n  offsetDiff.top = 0;\r\n\r\n  // If elements are same let's return early.\r\n  if (elemA === elemB) return offsetDiff;\r\n\r\n  // Compare containing blocks if necessary.\r\n  if (compareContainingBlocks) {\r\n    elemA = getContainingBlock(elemA, true);\r\n    elemB = getContainingBlock(elemB, true);\r\n\r\n    // If containing blocks are identical, let's return early.\r\n    if (elemA === elemB) return offsetDiff;\r\n  }\r\n\r\n  // Finally, let's calculate the offset diff.\r\n  getOffset(elemA, offsetA);\r\n  getOffset(elemB, offsetB);\r\n  offsetDiff.left = offsetB.left - offsetA.left;\r\n  offsetDiff.top = offsetB.top - offsetA.top;\r\n\r\n  return offsetDiff;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getStyle from './getStyle.js';\r\n\r\nconst translateData = {};\r\n\r\n/**\r\n * Returns the element's computed translateX and translateY values as a floats.\r\n * The returned object is always the same object and updated every time this\r\n * function is called.\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {Object}\r\n */\r\nexport default function getTranslate(element) {\r\n  translateData.x = 0;\r\n  translateData.y = 0;\r\n\r\n  const transform = getStyle(element, 'transform');\r\n  if (!transform) return translateData;\r\n\r\n  const matrixData = transform.replace('matrix(', '').split(',');\r\n  translateData.x = parseFloat(matrixData[4]) || 0;\r\n  translateData.y = parseFloat(matrixData[5]) || 0;\r\n\r\n  return translateData;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\n/**\r\n * Transform translateX and translateY value into CSS transform style\r\n * property's value.\r\n *\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @returns {String}\r\n */\r\nexport default function getTranslateString(x, y) {\r\n  return 'translateX(' + x + 'px) translateY(' + y + 'px)';\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst tempArray = [];\r\n\r\n/**\r\n * Insert an item or an array of items to array to a specified index. Mutates\r\n * the array. The index can be negative in which case the items will be added\r\n * to the end of the array.\r\n *\r\n * @param {Array} array\r\n * @param {*} items\r\n * @param {Number} [index=-1]\r\n */\r\nexport default function arrayInsert(array, items, index) {\r\n  let startIndex = typeof index === 'number' ? index : -1;\r\n  if (startIndex < 0) startIndex = array.length - startIndex + 1;\r\n\r\n  array.splice(...tempArray.concat(startIndex, 0, items));\r\n  tempArray.length = 0;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst objectType = '[object Object]';\r\nconst toString = Object.prototype.toString;\r\n\r\n/**\r\n * Check if a value is a plain object.\r\n *\r\n * @param {*} val\r\n * @returns {Boolean}\r\n */\r\nexport default function isPlainObject(val) {\r\n  return typeof val === 'object' && toString.call(val) === objectType;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport elementMatches from './elementMatches.js';\r\n\r\n/**\r\n * Remove class from an element.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} className\r\n */\r\nfunction removeClassModern(element, className) {\r\n  element.classList.remove(className);\r\n}\r\n\r\n/**\r\n * Remove class from an element (legacy version, for IE9 support).\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} className\r\n */\r\nfunction removeClassLegacy(element, className) {\r\n  if (elementMatches(element, '.' + className)) {\r\n    element.className = (' ' + element.className + ' ').replace(' ' + className + ' ', ' ').trim();\r\n  }\r\n}\r\n\r\nexport default ('classList' in Element.prototype ? removeClassModern : removeClassLegacy);\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\nimport { Component } from 'react';\r\nimport Hammer from 'hammerjs';\r\n\r\nimport {\r\n  eventMove,\r\n  eventSend,\r\n  eventBeforeSend,\r\n  eventReceive,\r\n  eventBeforeReceive,\r\n  eventDragInit,\r\n  eventDragStart,\r\n  eventDragMove,\r\n  eventDragScroll,\r\n  eventDragEnd,\r\n  gridInstances,\r\n  namespace\r\n} from '../shared.js';\r\n\r\nimport { addMoveTick, cancelMoveTick, addScrollTick, cancelScrollTick } from '../ticker.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport arrayMove from '../utils/arrayMove.js';\r\nimport arraySwap from '../utils/arraySwap.js';\r\nimport debounce from '../utils/debounce.js';\r\nimport elementMatches from '../utils/elementMatches.js';\r\nimport getContainingBlock from '../utils/getContainingBlock.js';\r\nimport getOffsetDiff from '../utils/getOffsetDiff.js';\r\nimport getStyle from '../utils/getStyle.js';\r\nimport getTranslate from '../utils/getTranslate.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport arrayInsert from '../utils/arrayInsert.js';\r\nimport isPlainObject from '../utils/isPlainObject.js';\r\nimport isTransformed from '../utils/isTransformed.js';\r\nimport normalizeArrayIndex from '../utils/normalizeArrayIndex.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport setStyles from '../utils/setStyles';\r\nimport { isTransformSupported, transformProp } from '../utils/supportedTransform.js';\r\n\r\n// To provide consistently correct dragging experience we need to know if\r\n// transformed elements leak fixed elements or not.\r\nlet hasTransformLeak = checkTransformLeak();\r\n\r\n// Drag start predicate states.\r\nconst startPredicateInactive = 0;\r\nconst startPredicatePending = 1;\r\nconst startPredicateResolved = 2;\r\nconst startPredicateRejected = 3;\r\n\r\n/**\r\n * Bind Hammer touch interaction to an item.\r\n *\r\n * @class\r\n * @param {Item} item\r\n */\r\nclass ItemDrag extends Component {\r\n  constructor(item) {\r\n    super(item);\r\n    if (!Hammer) {\r\n      throw new Error(`[${namespace}] required dependency Hammer is not defined.`);\r\n    }\r\n\r\n    // If we don't have a valid transform leak test result yet, let's run the\r\n    // test on first ItemDrag init. The test needs body element to be ready and\r\n    // here we can be sure that it is ready.\r\n    if (hasTransformLeak === null) {\r\n      hasTransformLeak = checkTransformLeak();\r\n    }\r\n\r\n    const drag = this;\r\n    const element = item._element;\r\n    const grid = item.getGrid();\r\n    const settings = grid._settings;\r\n    let hammer;\r\n\r\n    // Start predicate private data.\r\n    const startPredicate =\r\n      typeof settings.dragStartPredicate === 'function'\r\n        ? settings.dragStartPredicate\r\n        : ItemDrag.defaultStartPredicate;\r\n    let startPredicateState = startPredicateInactive;\r\n    let startPredicateResult;\r\n\r\n    // Protected data.\r\n    this._item = item;\r\n    this._gridId = grid._id;\r\n    this._hammer = hammer = new Hammer.Manager(element);\r\n    this._isDestroyed = false;\r\n    this._isMigrating = false;\r\n\r\n    // Setup item's initial drag data.\r\n    this._reset();\r\n\r\n    // Bind some methods that needs binding.\r\n    this._onScroll = this._onScroll.bind(this);\r\n    this._prepareMove = this._prepareMove.bind(this);\r\n    this._applyMove = this._applyMove.bind(this);\r\n    this._prepareScroll = this._prepareScroll.bind(this);\r\n    this._applyScroll = this._applyScroll.bind(this);\r\n    this._checkOverlap = this._checkOverlap.bind(this);\r\n\r\n    // Create a private drag start resolver that can be used to resolve the drag\r\n    // start predicate asynchronously.\r\n    this._forceResolveStartPredicate = function(event) {\r\n      if (!this._isDestroyed && startPredicateState === startPredicatePending) {\r\n        startPredicateState = startPredicateResolved;\r\n        this._onStart(event);\r\n      }\r\n    };\r\n\r\n    // Create debounce overlap checker function.\r\n    this._checkOverlapDebounce = debounce(this._checkOverlap, settings.dragSortInterval);\r\n\r\n    // Add drag recognizer to hammer.\r\n    hammer.add(\r\n      new Hammer.Pan({\r\n        event: 'drag',\r\n        pointers: 1,\r\n        threshold: 0,\r\n        direction: Hammer.DIRECTION_ALL\r\n      })\r\n    );\r\n\r\n    // Add drag init recognizer to hammer.\r\n    hammer.add(\r\n      new Hammer.Press({\r\n        event: 'draginit',\r\n        pointers: 1,\r\n        threshold: 1000,\r\n        time: 0\r\n      })\r\n    );\r\n\r\n    // Configure the hammer instance.\r\n    if (isPlainObject(settings.dragHammerSettings)) {\r\n      hammer.set(settings.dragHammerSettings);\r\n    }\r\n\r\n    // Bind drag events.\r\n    hammer\r\n      .on('draginit dragstart dragmove', e => {\r\n        // Let's activate drag start predicate state.\r\n        if (startPredicateState === startPredicateInactive) {\r\n          startPredicateState = startPredicatePending;\r\n        }\r\n\r\n        // If predicate is pending try to resolve it.\r\n        if (startPredicateState === startPredicatePending) {\r\n          startPredicateResult = startPredicate(drag._item, e);\r\n          if (startPredicateResult === true) {\r\n            startPredicateState = startPredicateResolved;\r\n            drag._onStart(e);\r\n          } else if (startPredicateResult === false) {\r\n            startPredicateState = startPredicateRejected;\r\n          }\r\n        }\r\n\r\n        // Otherwise if predicate is resolved and drag is active, move the item.\r\n        else if (startPredicateState === startPredicateResolved && drag._isActive) {\r\n          drag._onMove(e);\r\n        }\r\n      })\r\n      .on('dragend dragcancel draginitup', e => {\r\n        // Check if the start predicate was resolved during drag.\r\n        const isResolved = startPredicateState === startPredicateResolved;\r\n\r\n        // Do final predicate check to allow user to unbind stuff for the current\r\n        // drag procedure within the predicate callback. The return value of this\r\n        // check will have no effect to the state of the predicate.\r\n        startPredicate(drag._item, e);\r\n\r\n        // Reset start predicate state.\r\n        startPredicateState = startPredicateInactive;\r\n\r\n        // If predicate is resolved and dragging is active, call the end handler.\r\n        if (isResolved && drag._isActive) drag._onEnd(e);\r\n      });\r\n\r\n    // Prevent native link/image dragging for the item and it's ancestors.\r\n    element.addEventListener('dragstart', preventDefault, false);\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Abort dragging and reset drag data.\r\n   *\r\n   * @public\r\n   * @memberof ItemDrag.prototype\r\n   * @returns {ItemDrag}\r\n   */\r\n  stop() {\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = this._getGrid();\r\n\r\n    if (!this._isActive) return this;\r\n\r\n    // If the item is being dropped into another grid, finish it up and return\r\n    // immediately.\r\n    if (this._isMigrating) {\r\n      this._finishMigration();\r\n      return this;\r\n    }\r\n\r\n    // Cancel queued move and scroll ticks.\r\n    cancelMoveTick(item._id);\r\n    cancelScrollTick(item._id);\r\n\r\n    // Remove scroll listeners.\r\n    this._unbindScrollListeners();\r\n\r\n    // Cancel overlap check.\r\n    this._checkOverlapDebounce('cancel');\r\n\r\n    // Append item element to the container if it's not it's child. Also make\r\n    // sure the translate values are adjusted to account for the DOM shift.\r\n    if (element.parentNode !== grid._element) {\r\n      grid._element.appendChild(element);\r\n      element.style[transformProp] = getTranslateString(this._gridX, this._gridY);\r\n    }\r\n\r\n    // Remove dragging class.\r\n    removeClass(element, grid._settings.itemDraggingClass);\r\n\r\n    // Reset drag data.\r\n    this._reset();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy instance.\r\n   *\r\n   * @public\r\n   * @memberof ItemDrag.prototype\r\n   * @returns {ItemDrag}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n    this.stop();\r\n    this._hammer.destroy();\r\n    this._item._element.removeEventListener('dragstart', preventDefault, false);\r\n    this._isDestroyed = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Get Grid instance.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @returns {?Grid}\r\n   */\r\n  _getGrid() {\r\n    return gridInstances[this._gridId] || null;\r\n  }\r\n\r\n  /**\r\n   * Setup/reset drag data.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _reset() {\r\n    // Is item being dragged?\r\n    this._isActive = false;\r\n\r\n    // The dragged item's container element.\r\n    this._container = null;\r\n\r\n    // The dragged item's containing block.\r\n    this._containingBlock = null;\r\n\r\n    // Hammer event data.\r\n    this._lastEvent = null;\r\n    this._lastScrollEvent = null;\r\n\r\n    // All the elements which need to be listened for scroll events during\r\n    // dragging.\r\n    this._scrollers = [];\r\n\r\n    // The current translateX/translateY position.\r\n    this._left = 0;\r\n    this._top = 0;\r\n\r\n    // Dragged element's current position within the grid.\r\n    this._gridX = 0;\r\n    this._gridY = 0;\r\n\r\n    // Dragged element's current offset from window's northwest corner. Does\r\n    // not account for element's margins.\r\n    this._elementClientX = 0;\r\n    this._elementClientY = 0;\r\n\r\n    // Offset difference between the dragged element's temporary drag\r\n    // container and it's original container.\r\n    this._containerDiffX = 0;\r\n    this._containerDiffY = 0;\r\n  }\r\n\r\n  /**\r\n   * Bind drag scroll handlers to all scrollable ancestor elements of the\r\n   * dragged element and the drag container element.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _bindScrollListeners() {\r\n    const gridContainer = this._getGrid()._element;\r\n    const dragContainer = this._container;\r\n    const scrollers = this._scrollers;\r\n    let containerScrollers;\r\n    let i;\r\n\r\n    // Get dragged element's scrolling parents.\r\n    scrollers.length = 0;\r\n    getScrollParents(this._item._element, scrollers);\r\n\r\n    // If drag container is defined and it's not the same element as grid\r\n    // container then we need to add the grid container and it's scroll parents\r\n    // to the elements which are going to be listener for scroll events.\r\n    if (dragContainer !== gridContainer) {\r\n      containerScrollers = [];\r\n      getScrollParents(gridContainer, containerScrollers);\r\n      containerScrollers.push(gridContainer);\r\n      for (i = 0; i < containerScrollers.length; i++) {\r\n        if (!scrollers.includes(containerScrollers[i])) {\r\n          scrollers.push(containerScrollers[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Bind scroll listeners.\r\n    for (i = 0; i < scrollers.length; i++) {\r\n      scrollers[i].addEventListener('scroll', this._onScroll);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unbind currently bound drag scroll handlers from all scrollable ancestor\r\n   * elements of the dragged element and the drag container element.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _unbindScrollListeners() {\r\n    const scrollers = this._scrollers;\r\n    let i;\r\n\r\n    for (i = 0; i < scrollers.length; i++) {\r\n      scrollers[i].removeEventListener('scroll', this._onScroll);\r\n    }\r\n\r\n    scrollers.length = 0;\r\n  }\r\n\r\n  /**\r\n   * Setup default start predicate.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} [options]\r\n   * @returns {Object}\r\n   */\r\n  _setupStartPredicate(options) {\r\n    const config = options || this._getGrid()._settings.dragStartPredicate || 0;\r\n    return (this._startPredicateData = {\r\n      distance: Math.abs(config.distance) || 0,\r\n      delay: Math.max(config.delay, 0) || 0,\r\n      handle: typeof config.handle === 'string' ? config.handle : false\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Setup default start predicate handle.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   * @returns {?HTMLElement}\r\n   */\r\n  _getStartPredicateHandle(event) {\r\n    const predicate = this._startPredicateData;\r\n    const element = this._item._element;\r\n    let handleElement = element;\r\n\r\n    // No handle, no hassle -> let's use the item element as the handle.\r\n    if (!predicate.handle) return handleElement;\r\n\r\n    // If there is a specific predicate handle defined, let's try to get it.\r\n    handleElement = (event.changedPointers[0] || 0).target;\r\n    while (handleElement && !elementMatches(handleElement, predicate.handle)) {\r\n      handleElement = handleElement !== element ? handleElement.parentElement : null;\r\n    }\r\n    return handleElement || null;\r\n  }\r\n\r\n  /**\r\n   * Unbind currently bound drag scroll handlers from all scrollable ancestor\r\n   * elements of the dragged element and the drag container element.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   * @returns {Boolean}\r\n   */\r\n  _resolveStartPredicate(event) {\r\n    const predicate = this._startPredicateData;\r\n    const pointer = event.changedPointers[0];\r\n    const pageX = (pointer && pointer.pageX) || 0;\r\n    const pageY = (pointer && pointer.pageY) || 0;\r\n    let handleRect;\r\n    let handleLeft;\r\n    let handleTop;\r\n    let handleWidth;\r\n    let handleHeight;\r\n\r\n    // If the moved distance is smaller than the threshold distance or there is\r\n    // some delay left, ignore this predicate cycle.\r\n    if (event.distance < predicate.distance || predicate.delay) return;\r\n\r\n    // Get handle rect data.\r\n    handleRect = predicate.handleElement.getBoundingClientRect();\r\n    handleLeft = handleRect.left + (window.pageXOffset || 0);\r\n    handleTop = handleRect.top + (window.pageYOffset || 0);\r\n    handleWidth = handleRect.width;\r\n    handleHeight = handleRect.height;\r\n\r\n    // Reset predicate data.\r\n    this._resetStartPredicate();\r\n\r\n    // If the cursor is still within the handle let's start the drag.\r\n    return (\r\n      handleWidth &&\r\n      handleHeight &&\r\n      pageX >= handleLeft &&\r\n      pageX < handleLeft + handleWidth &&\r\n      pageY >= handleTop &&\r\n      pageY < handleTop + handleHeight\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Finalize start predicate.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   */\r\n  _finishStartPredicate(event) {\r\n    const element = this._item._element;\r\n\r\n    // Reset predicate.\r\n    this._resetStartPredicate();\r\n\r\n    // If the gesture can be interpreted as click let's try to open the element's\r\n    // href url (if it is an anchor element).\r\n    if (isClick(event)) openAnchorHref(element);\r\n  }\r\n\r\n  /**\r\n   * Reset for default drag start predicate function.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _resetStartPredicate() {\r\n    const predicate = this._startPredicateData;\r\n    if (predicate) {\r\n      if (predicate.delayTimer) {\r\n        predicate.delayTimer = window.clearTimeout(predicate.delayTimer);\r\n      }\r\n      this._startPredicateData = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check (during drag) if an item is overlapping other items and based on\r\n   * the configuration layout the items.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _checkOverlap() {\r\n    if (!this._isActive) return;\r\n\r\n    const item = this._item;\r\n    const settings = this._getGrid()._settings;\r\n    let result;\r\n    let currentGrid;\r\n    let currentIndex;\r\n    let targetGrid;\r\n    let targetIndex;\r\n    let sortAction;\r\n    let isMigration;\r\n\r\n    // Get overlap check result.\r\n    if (typeof settings.dragSortPredicate === 'function') {\r\n      result = settings.dragSortPredicate(item, this._lastEvent);\r\n    } else {\r\n      result = ItemDrag.defaultSortPredicate(item, settings.dragSortPredicate);\r\n    }\r\n\r\n    // Let's make sure the result object has a valid index before going further.\r\n    if (!result || typeof result.index !== 'number') return;\r\n\r\n    currentGrid = item.getGrid();\r\n    targetGrid = result.grid || currentGrid;\r\n    isMigration = currentGrid !== targetGrid;\r\n    currentIndex = currentGrid._items.indexOf(item);\r\n    targetIndex = normalizeArrayIndex(targetGrid._items, result.index, isMigration);\r\n    sortAction = result.action === 'swap' ? 'swap' : 'move';\r\n\r\n    // If the item was moved within it's current grid.\r\n    if (!isMigration) {\r\n      // Make sure the target index is not the current index.\r\n      if (currentIndex !== targetIndex) {\r\n        // Do the sort.\r\n        (sortAction === 'swap' ? arraySwap : arrayMove)(\r\n          currentGrid._items,\r\n          currentIndex,\r\n          targetIndex\r\n        );\r\n\r\n        // Emit move event.\r\n        if (currentGrid._hasListeners(eventMove)) {\r\n          currentGrid._emit(eventMove, {\r\n            item,\r\n            fromIndex: currentIndex,\r\n            toIndex: targetIndex,\r\n            action: sortAction\r\n          });\r\n        }\r\n\r\n        // Layout the grid.\r\n        currentGrid.layout();\r\n      }\r\n    }\r\n\r\n    // If the item was moved to another grid.\r\n    else {\r\n      // Emit beforeSend event.\r\n      if (currentGrid._hasListeners(eventBeforeSend)) {\r\n        currentGrid._emit(eventBeforeSend, {\r\n          item,\r\n          fromGrid: currentGrid,\r\n          fromIndex: currentIndex,\r\n          toGrid: targetGrid,\r\n          toIndex: targetIndex\r\n        });\r\n      }\r\n\r\n      // Emit beforeReceive event.\r\n      if (targetGrid._hasListeners(eventBeforeReceive)) {\r\n        targetGrid._emit(eventBeforeReceive, {\r\n          item,\r\n          fromGrid: currentGrid,\r\n          fromIndex: currentIndex,\r\n          toGrid: targetGrid,\r\n          toIndex: targetIndex\r\n        });\r\n      }\r\n\r\n      // Update item's grid id reference.\r\n      item._gridId = targetGrid._id;\r\n\r\n      // Update drag instance's migrating indicator.\r\n      this._isMigrating = item._gridId !== this._gridId;\r\n\r\n      // Move item instance from current grid to target grid.\r\n      currentGrid._items.splice(currentIndex, 1);\r\n      arrayInsert(targetGrid._items, item, targetIndex);\r\n\r\n      // Set sort data as null, which is an indicator for the item comparison\r\n      // function that the sort data of this specific item should be fetched\r\n      // lazily.\r\n      item._sortData = null;\r\n\r\n      // Emit send event.\r\n      if (currentGrid._hasListeners(eventSend)) {\r\n        currentGrid._emit(eventSend, {\r\n          item,\r\n          fromGrid: currentGrid,\r\n          fromIndex: currentIndex,\r\n          toGrid: targetGrid,\r\n          toIndex: targetIndex\r\n        });\r\n      }\r\n\r\n      // Emit receive event.\r\n      if (targetGrid._hasListeners(eventReceive)) {\r\n        targetGrid._emit(eventReceive, {\r\n          item,\r\n          fromGrid: currentGrid,\r\n          fromIndex: currentIndex,\r\n          toGrid: targetGrid,\r\n          toIndex: targetIndex\r\n        });\r\n      }\r\n\r\n      // Layout both grids.\r\n      currentGrid.layout();\r\n      targetGrid.layout();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If item is dragged into another grid, finish the migration process\r\n   * gracefully.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _finishMigration() {\r\n    const item = this._item;\r\n    const release = item._release;\r\n    const element = item._element;\r\n    const isActive = item._isActive;\r\n    const targetGrid = item.getGrid();\r\n    const targetGridElement = targetGrid._element;\r\n    const targetSettings = targetGrid._settings;\r\n    const targetContainer = targetSettings.dragContainer || targetGridElement;\r\n    const currentSettings = this._getGrid()._settings;\r\n    const currentContainer = element.parentNode;\r\n    let translate;\r\n    let offsetDiff;\r\n\r\n    // Destroy current drag. Note that we need to set the migrating flag to\r\n    // false first, because otherwise we create an infinite loop between this\r\n    // and the drag.stop() method.\r\n    this._isMigrating = false;\r\n    this.destroy();\r\n\r\n    // Remove current classnames.\r\n    removeClass(element, currentSettings.itemClass);\r\n    removeClass(element, currentSettings.itemVisibleClass);\r\n    removeClass(element, currentSettings.itemHiddenClass);\r\n\r\n    // Add new classnames.\r\n    addClass(element, targetSettings.itemClass);\r\n    addClass(element, isActive ? targetSettings.itemVisibleClass : targetSettings.itemHiddenClass);\r\n\r\n    // Move the item inside the target container if it's different than the\r\n    // current container.\r\n    if (targetContainer !== currentContainer) {\r\n      targetContainer.appendChild(element);\r\n      offsetDiff = getOffsetDiff(currentContainer, targetContainer, true);\r\n      translate = getTranslate(element);\r\n      translate.x -= offsetDiff.left;\r\n      translate.y -= offsetDiff.top;\r\n    }\r\n\r\n    // Update item's cached dimensions and sort data.\r\n    item._refreshDimensions();\r\n    item._refreshSortData();\r\n\r\n    // Calculate the offset difference between target's drag container (if any)\r\n    // and actual grid container element. We save it later for the release\r\n    // process.\r\n    offsetDiff = getOffsetDiff(targetContainer, targetGridElement, true);\r\n    release._containerDiffX = offsetDiff.left;\r\n    release._containerDiffY = offsetDiff.top;\r\n\r\n    // Recreate item's drag handler.\r\n    item._drag = targetSettings.dragEnabled ? new ItemDrag(item) : null;\r\n\r\n    // Adjust the position of the item element if it was moved from a container\r\n    // to another.\r\n    if (targetContainer !== currentContainer) {\r\n      element.style[transformProp] = getTranslateString(translate.x, translate.y);\r\n    }\r\n\r\n    // Update child element's styles to reflect the current visibility state.\r\n    item._child.removeAttribute('style');\r\n    setStyles(item._child, isActive ? targetSettings.visibleStyles : targetSettings.hiddenStyles);\r\n\r\n    // Start the release.\r\n    release.start();\r\n  }\r\n\r\n  /**\r\n   * Drag start handler.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   */\r\n  _onStart(event) {\r\n    const item = this._item;\r\n\r\n    // If item is not active, don't start the drag.\r\n    if (!item._isActive) return;\r\n\r\n    const element = item._element;\r\n    const grid = this._getGrid();\r\n    const settings = grid._settings;\r\n    const release = item._release;\r\n    const migrate = item._migrate;\r\n    const gridContainer = grid._element;\r\n    const dragContainer = settings.dragContainer || gridContainer;\r\n    const containingBlock = getContainingBlock(dragContainer, true);\r\n    const translate = getTranslate(element);\r\n    let currentLeft = translate.x;\r\n    let currentTop = translate.y;\r\n    const elementRect = element.getBoundingClientRect();\r\n    const hasDragContainer = dragContainer !== gridContainer;\r\n    let offsetDiff;\r\n\r\n    // If grid container is not the drag container, we need to calculate the\r\n    // offset difference between grid container and drag container's containing\r\n    // element.\r\n    if (hasDragContainer) {\r\n      offsetDiff = getOffsetDiff(containingBlock, gridContainer);\r\n    }\r\n\r\n    // Stop current positioning animation.\r\n    if (item.isPositioning()) {\r\n      item._layout.stop(true, { transform: getTranslateString(currentLeft, currentTop) });\r\n    }\r\n\r\n    // Stop current migration animation.\r\n    if (migrate._isActive) {\r\n      currentLeft -= migrate._containerDiffX;\r\n      currentTop -= migrate._containerDiffY;\r\n      migrate.stop(true, { transform: getTranslateString(currentLeft, currentTop) });\r\n    }\r\n\r\n    // If item is being released reset release data.\r\n    if (item.isReleasing()) release._reset();\r\n\r\n    // Setup drag data.\r\n    this._isActive = true;\r\n    this._lastEvent = event;\r\n    this._container = dragContainer;\r\n    this._containingBlock = containingBlock;\r\n    this._elementClientX = elementRect.left;\r\n    this._elementClientY = elementRect.top;\r\n    this._left = this._gridX = currentLeft;\r\n    this._top = this._gridY = currentTop;\r\n\r\n    // Emit dragInit event.\r\n    grid._emit(eventDragInit, item, event);\r\n\r\n    // If a specific drag container is set and it is different from the\r\n    // grid's container element we need to cast some extra spells.\r\n    if (hasDragContainer) {\r\n      // Store the container offset diffs to drag data.\r\n      this._containerDiffX = offsetDiff.left;\r\n      this._containerDiffY = offsetDiff.top;\r\n\r\n      // If the dragged element is a child of the drag container all we need to\r\n      // do is setup the relative drag position data.\r\n      if (element.parentNode === dragContainer) {\r\n        this._gridX = currentLeft - this._containerDiffX;\r\n        this._gridY = currentTop - this._containerDiffY;\r\n      }\r\n\r\n      // Otherwise we need to append the element inside the correct container,\r\n      // setup the actual drag position data and adjust the element's translate\r\n      // values to account for the DOM position shift.\r\n      else {\r\n        this._left = currentLeft + this._containerDiffX;\r\n        this._top = currentTop + this._containerDiffY;\r\n        dragContainer.appendChild(element);\r\n        element.style[transformProp] = getTranslateString(this._left, this._top);\r\n      }\r\n    }\r\n\r\n    // Set drag class and bind scrollers.\r\n    addClass(element, settings.itemDraggingClass);\r\n    this._bindScrollListeners();\r\n\r\n    // Emit dragStart event.\r\n    grid._emit(eventDragStart, item, event);\r\n  }\r\n\r\n  /**\r\n   * Drag move handler.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   */\r\n  _onMove(event) {\r\n    const item = this._item;\r\n\r\n    // If item is not active, reset drag.\r\n    if (!item._isActive) {\r\n      this.stop();\r\n      return;\r\n    }\r\n\r\n    const settings = this._getGrid()._settings;\r\n    const axis = settings.dragAxis;\r\n    const xDiff = event.deltaX - this._lastEvent.deltaX;\r\n    const yDiff = event.deltaY - this._lastEvent.deltaY;\r\n\r\n    // Update last event.\r\n    this._lastEvent = event;\r\n\r\n    // Update horizontal position data.\r\n    if (axis !== 'y') {\r\n      this._left += xDiff;\r\n      this._gridX += xDiff;\r\n      this._elementClientX += xDiff;\r\n    }\r\n\r\n    // Update vertical position data.\r\n    if (axis !== 'x') {\r\n      this._top += yDiff;\r\n      this._gridY += yDiff;\r\n      this._elementClientY += yDiff;\r\n    }\r\n\r\n    // Do move prepare/apply handling in the next tick.\r\n    addMoveTick(item._id, this._prepareMove, this._applyMove);\r\n  }\r\n\r\n  /**\r\n   * Prepare dragged item for moving.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _prepareMove() {\r\n    // Do nothing if item is not active.\r\n    if (!this._item._isActive) return;\r\n\r\n    // If drag sort is enabled -> check overlap.\r\n    if (this._getGrid()._settings.dragSort) this._checkOverlapDebounce();\r\n  }\r\n\r\n  /**\r\n   * Apply movement to dragged item.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _applyMove() {\r\n    const item = this._item;\r\n\r\n    // Do nothing if item is not active.\r\n    if (!item._isActive) return;\r\n\r\n    // Update element's translateX/Y values.\r\n    item._element.style[transformProp] = getTranslateString(this._left, this._top);\r\n\r\n    // Emit dragMove event.\r\n    this._getGrid()._emit(eventDragMove, item, this._lastEvent);\r\n  }\r\n\r\n  /**\r\n   * Drag scroll handler.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   */\r\n  _onScroll(event) {\r\n    const item = this._item;\r\n\r\n    // If item is not active, reset drag.\r\n    if (!item._isActive) {\r\n      this.stop();\r\n      return;\r\n    }\r\n\r\n    // Update last scroll event.\r\n    this._lastScrollEvent = event;\r\n\r\n    // Do scroll prepare/apply handling in the next tick.\r\n    addScrollTick(item._id, this._prepareScroll, this._applyScroll);\r\n  }\r\n\r\n  /**\r\n   * Prepare dragged item for scrolling.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _prepareScroll() {\r\n    const item = this._item;\r\n\r\n    // If item is not active do nothing.\r\n    if (!item._isActive) return;\r\n\r\n    const element = item._element;\r\n    const grid = this._getGrid();\r\n    const settings = grid._settings;\r\n    const axis = settings.dragAxis;\r\n    const gridContainer = grid._element;\r\n    let offsetDiff;\r\n\r\n    // Calculate element's rect and x/y diff.\r\n    const rect = element.getBoundingClientRect();\r\n    const xDiff = this._elementClientX - rect.left;\r\n    const yDiff = this._elementClientY - rect.top;\r\n\r\n    // Update container diff.\r\n    if (this._container !== gridContainer) {\r\n      offsetDiff = getOffsetDiff(this._containingBlock, gridContainer);\r\n      this._containerDiffX = offsetDiff.left;\r\n      this._containerDiffY = offsetDiff.top;\r\n    }\r\n\r\n    // Update horizontal position data.\r\n    if (axis !== 'y') {\r\n      this._left += xDiff;\r\n      this._gridX = this._left - this._containerDiffX;\r\n    }\r\n\r\n    // Update vertical position data.\r\n    if (axis !== 'x') {\r\n      this._top += yDiff;\r\n      this._gridY = this._top - this._containerDiffY;\r\n    }\r\n\r\n    // Overlap handling.\r\n    if (settings.dragSort) this._checkOverlapDebounce();\r\n  }\r\n\r\n  /**\r\n   * Apply scroll to dragged item.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   */\r\n  _applyScroll() {\r\n    const item = this._item;\r\n\r\n    // If item is not active do nothing.\r\n    if (!item._isActive) return;\r\n\r\n    // Update element's translateX/Y values.\r\n    item._element.style[transformProp] = getTranslateString(this._left, this._top);\r\n\r\n    // Emit dragScroll event.\r\n    this._getGrid()._emit(eventDragScroll, item, this._lastScrollEvent);\r\n  }\r\n\r\n  /**\r\n   * Drag end handler.\r\n   *\r\n   * @private\r\n   * @memberof ItemDrag.prototype\r\n   * @param {Object} event\r\n   */\r\n  _onEnd(event) {\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = this._getGrid();\r\n    const settings = grid._settings;\r\n    const release = item._release;\r\n\r\n    // If item is not active, reset drag.\r\n    if (!item._isActive) {\r\n      this.stop();\r\n      return;\r\n    }\r\n\r\n    // Cancel queued move and scroll ticks.\r\n    cancelMoveTick(item._id);\r\n    cancelScrollTick(item._id);\r\n\r\n    // Finish currently queued overlap check.\r\n    settings.dragSort && this._checkOverlapDebounce('finish');\r\n\r\n    // Remove scroll listeners.\r\n    this._unbindScrollListeners();\r\n\r\n    // Setup release data.\r\n    release._containerDiffX = this._containerDiffX;\r\n    release._containerDiffY = this._containerDiffY;\r\n\r\n    // Reset drag data.\r\n    this._reset();\r\n\r\n    // Remove drag class name from element.\r\n    removeClass(element, settings.itemDraggingClass);\r\n\r\n    // Emit dragEnd event.\r\n    grid._emit(eventDragEnd, item, event);\r\n\r\n    // Finish up the migration process or start the release process.\r\n    this._isMigrating ? this._finishMigration() : release.start();\r\n  }\r\n}\r\n\r\n/**\r\n * Public static methods\r\n * *********************\r\n */\r\n\r\n/**\r\n * Default drag start predicate handler that handles anchor elements\r\n * gracefully. The return value of this function defines if the drag is\r\n * started, rejected or pending. When true is returned the dragging is started\r\n * and when false is returned the dragging is rejected. If nothing is returned\r\n * the predicate will be called again on the next drag movement.\r\n *\r\n * @public\r\n * @memberof ItemDrag\r\n * @param {Item} item\r\n * @param {Object} event\r\n * @param {Object} [options]\r\n *   - An optional options object which can be used to pass the predicate\r\n *     it's options manually. By default the predicate retrieves the options\r\n *     from the grid's settings.\r\n * @returns {Boolean}\r\n */\r\nItemDrag.defaultStartPredicate = (item, event, options) => {\r\n  const drag = item._drag;\r\n  const predicate = drag._startPredicateData || drag._setupStartPredicate(options);\r\n\r\n  // Final event logic. At this stage return value does not matter anymore,\r\n  // the predicate is either resolved or it's not and there's nothing to do\r\n  // about it. Here we just reset data and if the item element is a link\r\n  // we follow it (if there has only been slight movement).\r\n  if (event.isFinal) {\r\n    drag._finishStartPredicate(event);\r\n    return;\r\n  }\r\n\r\n  // Find and store the handle element so we can check later on if the\r\n  // cursor is within the handle. If we have a handle selector let's find\r\n  // the corresponding element. Otherwise let's use the item element as the\r\n  // handle.\r\n  if (!predicate.handleElement) {\r\n    predicate.handleElement = drag._getStartPredicateHandle(event);\r\n    if (!predicate.handleElement) return false;\r\n  }\r\n\r\n  // If delay is defined let's keep track of the latest event and initiate\r\n  // delay if it has not been done yet.\r\n  if (predicate.delay) {\r\n    predicate.event = event;\r\n    if (!predicate.delayTimer) {\r\n      predicate.delayTimer = window.setTimeout(() => {\r\n        predicate.delay = 0;\r\n        if (drag._resolveStartPredicate(predicate.event)) {\r\n          drag._forceResolveStartPredicate(predicate.event);\r\n          drag._resetStartPredicate();\r\n        }\r\n      }, predicate.delay);\r\n    }\r\n  }\r\n\r\n  return drag._resolveStartPredicate(event);\r\n};\r\n\r\n/**\r\n * Default drag sort predicate.\r\n *\r\n * @public\r\n * @memberof ItemDrag\r\n * @param {Item} item\r\n * @param {Object} [options]\r\n * @param {Number} [options.threshold=50]\r\n * @param {String} [options.action='move']\r\n * @returns {(Boolean|DragSortCommand)}\r\n *   - Returns false if no valid index was found. Otherwise returns drag sort\r\n *     command.\r\n */\r\nItemDrag.defaultSortPredicate = ((() => {\r\n  const itemRect = {};\r\n  const targetRect = {};\r\n  const returnData = {};\r\n  const rootGridArray = [];\r\n\r\n  function getTargetGrid(item, rootGrid, threshold) {\r\n    let target = null;\r\n    const dragSort = rootGrid._settings.dragSort;\r\n    let bestScore = -1;\r\n    let gridScore;\r\n    let grids;\r\n    let grid;\r\n    let i;\r\n\r\n    // Get potential target grids.\r\n    if (dragSort === true) {\r\n      rootGridArray[0] = rootGrid;\r\n      grids = rootGridArray;\r\n    } else {\r\n      grids = dragSort.call(rootGrid, item);\r\n    }\r\n\r\n    // Return immediately if there are no grids.\r\n    if (!Array.isArray(grids)) return target;\r\n\r\n    // Loop through the grids and get the best match.\r\n    for (i = 0; i < grids.length; i++) {\r\n      grid = grids[i];\r\n\r\n      // Filter out all destroyed grids.\r\n      if (grid._isDestroyed) continue;\r\n\r\n      // We need to update the grid's offsets and dimensions since they might\r\n      // have changed (e.g during scrolling).\r\n      grid._updateBoundingRect();\r\n\r\n      // Check how much dragged element overlaps the container element.\r\n      targetRect.width = grid._width;\r\n      targetRect.height = grid._height;\r\n      targetRect.left = grid._left;\r\n      targetRect.top = grid._top;\r\n      gridScore = getRectOverlapScore(itemRect, targetRect);\r\n\r\n      // Check if this grid is the best match so far.\r\n      if (gridScore > threshold && gridScore > bestScore) {\r\n        bestScore = gridScore;\r\n        target = grid;\r\n      }\r\n    }\r\n\r\n    // Always reset root grid array.\r\n    rootGridArray.length = 0;\r\n\r\n    return target;\r\n  }\r\n\r\n  return (item, options) => {\r\n    const drag = item._drag;\r\n    const rootGrid = drag._getGrid();\r\n\r\n    // Get drag sort predicate settings.\r\n    const sortThreshold = options && typeof options.threshold === 'number' ? options.threshold : 50;\r\n    const sortAction = options && options.action === 'swap' ? 'swap' : 'move';\r\n\r\n    // Populate item rect data.\r\n    itemRect.width = item._width;\r\n    itemRect.height = item._height;\r\n    itemRect.left = drag._elementClientX;\r\n    itemRect.top = drag._elementClientY;\r\n\r\n    // Calculate the target grid.\r\n    const grid = getTargetGrid(item, rootGrid, sortThreshold);\r\n\r\n    // Return early if we found no grid container element that overlaps the\r\n    // dragged item enough.\r\n    if (!grid) return false;\r\n\r\n    let gridOffsetLeft = 0;\r\n    let gridOffsetTop = 0;\r\n    let matchScore = -1;\r\n    let matchIndex;\r\n    let hasValidTargets;\r\n    let target;\r\n    let score;\r\n    let i;\r\n\r\n    // If item is moved within it's originating grid adjust item's left and\r\n    // top props. Otherwise if item is moved to/within another grid get the\r\n    // container element's offset (from the element's content edge).\r\n    if (grid === rootGrid) {\r\n      itemRect.left = drag._gridX + item._marginLeft;\r\n      itemRect.top = drag._gridY + item._marginTop;\r\n    } else {\r\n      grid._updateBorders(1, 0, 1, 0);\r\n      gridOffsetLeft = grid._left + grid._borderLeft;\r\n      gridOffsetTop = grid._top + grid._borderTop;\r\n    }\r\n\r\n    // Loop through the target grid items and try to find the best match.\r\n    for (i = 0; i < grid._items.length; i++) {\r\n      target = grid._items[i];\r\n\r\n      // If the target item is not active or the target item is the dragged\r\n      // item let's skip to the next item.\r\n      if (!target._isActive || target === item) {\r\n        continue;\r\n      }\r\n\r\n      // Mark the grid as having valid target items.\r\n      hasValidTargets = true;\r\n\r\n      // Calculate the target's overlap score with the dragged item.\r\n      targetRect.width = target._width;\r\n      targetRect.height = target._height;\r\n      targetRect.left = target._left + target._marginLeft + gridOffsetLeft;\r\n      targetRect.top = target._top + target._marginTop + gridOffsetTop;\r\n      score = getRectOverlapScore(itemRect, targetRect);\r\n\r\n      // Update best match index and score if the target's overlap score with\r\n      // the dragged item is higher than the current best match score.\r\n      if (score > matchScore) {\r\n        matchIndex = i;\r\n        matchScore = score;\r\n      }\r\n    }\r\n\r\n    // If there is no valid match and the item is being moved into another\r\n    // grid.\r\n    if (matchScore < sortThreshold && item.getGrid() !== grid) {\r\n      matchIndex = hasValidTargets ? -1 : 0;\r\n      matchScore = Infinity;\r\n    }\r\n\r\n    // Check if the best match overlaps enough to justify a placement switch.\r\n    if (matchScore >= sortThreshold) {\r\n      returnData.grid = grid;\r\n      returnData.index = matchIndex;\r\n      returnData.action = sortAction;\r\n      return returnData;\r\n    }\r\n\r\n    return false;\r\n  };\r\n}))();\r\n\r\n/**\r\n * Private helpers\r\n * ***************\r\n */\r\n\r\n/**\r\n * Prevent default.\r\n *\r\n * @param {Object} e\r\n */\r\nfunction preventDefault(e) {\r\n  if (e.preventDefault) e.preventDefault();\r\n}\r\n\r\n/**\r\n * Calculate how many percent the intersection area of two rectangles is from\r\n * the maximum potential intersection area between the rectangles.\r\n *\r\n * @param {Rectangle} a\r\n * @param {Rectangle} b\r\n * @returns {Number}\r\n *   - A number between 0-100.\r\n */\r\nfunction getRectOverlapScore(a, b) {\r\n  // Return 0 immediately if the rectangles do not overlap.\r\n  if (\r\n    a.left + a.width <= b.left ||\r\n    b.left + b.width <= a.left ||\r\n    a.top + a.height <= b.top ||\r\n    b.top + b.height <= a.top\r\n  ) {\r\n    return 0;\r\n  }\r\n\r\n  // Calculate intersection area's width, height, max height and max width.\r\n  const width = Math.min(a.left + a.width, b.left + b.width) - Math.max(a.left, b.left);\r\n  const height = Math.min(a.top + a.height, b.top + b.height) - Math.max(a.top, b.top);\r\n  const maxWidth = Math.min(a.width, b.width);\r\n  const maxHeight = Math.min(a.height, b.height);\r\n\r\n  return ((width * height) / (maxWidth * maxHeight)) * 100;\r\n}\r\n\r\n/**\r\n * Get element's scroll parents.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {Array} [data]\r\n * @returns {HTMLElement[]}\r\n */\r\nfunction getScrollParents(element, data) {\r\n  const ret = data || [];\r\n  let parent = element.parentNode;\r\n\r\n  //\r\n  // If transformed elements leak fixed elements.\r\n  //\r\n\r\n  if (hasTransformLeak) {\r\n    // If the element is fixed it can not have any scroll parents.\r\n    if (getStyle(element, 'position') === 'fixed') return ret;\r\n\r\n    // Find scroll parents.\r\n    while (parent && parent !== document && parent !== document.documentElement) {\r\n      if (isScrollable(parent)) ret.push(parent);\r\n      parent = getStyle(parent, 'position') === 'fixed' ? null : parent.parentNode;\r\n    }\r\n\r\n    // If parent is not fixed element, add window object as the last scroll\r\n    // parent.\r\n    parent !== null && ret.push(window);\r\n    return ret;\r\n  }\r\n\r\n  //\r\n  // If fixed elements behave as defined in the W3C specification.\r\n  //\r\n\r\n  // Find scroll parents.\r\n  while (parent && parent !== document) {\r\n    // If the currently looped element is fixed ignore all parents that are\r\n    // not transformed.\r\n    if (getStyle(element, 'position') === 'fixed' && !isTransformed(parent)) {\r\n      parent = parent.parentNode;\r\n      continue;\r\n    }\r\n\r\n    // Add the parent element to return items if it is scrollable.\r\n    if (isScrollable(parent)) ret.push(parent);\r\n\r\n    // Update element and parent references.\r\n    element = parent;\r\n    parent = parent.parentNode;\r\n  }\r\n\r\n  // If the last item is the root element, replace it with window. The root\r\n  // element scroll is propagated to the window.\r\n  if (ret[ret.length - 1] === document.documentElement) {\r\n    ret[ret.length - 1] = window;\r\n  }\r\n  // Otherwise add window as the last scroll parent.\r\n  else {\r\n    ret.push(window);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Check if an element is scrollable.\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {Boolean}\r\n */\r\nfunction isScrollable(element) {\r\n  let overflow = getStyle(element, 'overflow');\r\n  if (overflow === 'auto' || overflow === 'scroll') return true;\r\n\r\n  overflow = getStyle(element, 'overflow-x');\r\n  if (overflow === 'auto' || overflow === 'scroll') return true;\r\n\r\n  overflow = getStyle(element, 'overflow-y');\r\n  if (overflow === 'auto' || overflow === 'scroll') return true;\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Check if drag gesture can be interpreted as a click, based on final drag\r\n * event data.\r\n *\r\n * @param {Object} element\r\n * @returns {Boolean}\r\n */\r\nfunction isClick(event) {\r\n  return Math.abs(event.deltaX) < 2 && Math.abs(event.deltaY) < 2 && event.deltaTime < 200;\r\n}\r\n\r\n/**\r\n * Check if an element is an anchor element and open the href url if possible.\r\n *\r\n * @param {HTMLElement} element\r\n */\r\nfunction openAnchorHref(element) {\r\n  // Make sure the element is anchor element.\r\n  if (element.tagName.toLowerCase() !== 'a') return;\r\n\r\n  // Get href and make sure it exists.\r\n  const href = element.getAttribute('href');\r\n  if (!href) return;\r\n\r\n  // Finally let's navigate to the link href.\r\n  let target = element.getAttribute('target');\r\n  if (target && target !== '_self') {\r\n    window.open(href, target);\r\n  } else {\r\n    window.location.href = href;\r\n  }\r\n}\r\n\r\n/**\r\n * Detects if transformed elements leak fixed elements. According W3C\r\n * transform rendering spec a transformed element should contain even fixed\r\n * elements. Meaning that fixed elements are positioned relative to the\r\n * closest transformed ancestor element instead of window. However, not every\r\n * browser follows the spec (IE and older Firefox). So we need to test it.\r\n * https://www.w3.org/TR/css3-2d-transforms/#transform-rendering\r\n *\r\n * Borrowed from Mezr (v0.6.1):\r\n * https://github.com/niklasramo/mezr/blob/0.6.1/mezr.js#L607\r\n */\r\nfunction checkTransformLeak() {\r\n  // No transforms -> definitely leaks.\r\n  if (!isTransformSupported) return true;\r\n\r\n  // No body available -> can't check it.\r\n  if (!document.body) return null;\r\n\r\n  // Do the test.\r\n  const elems = [0, 1].map((elem, isInner) => {\r\n    elem = document.createElement('div');\r\n    elem.style.position = isInner ? 'fixed' : 'absolute';\r\n    elem.style.display = 'block';\r\n    elem.style.visibility = 'hidden';\r\n    elem.style.left = isInner ? '0px' : '1px';\r\n    elem.style[transformProp] = 'none';\r\n    return elem;\r\n  });\r\n  const outer = document.body.appendChild(elems[0]);\r\n  const inner = outer.appendChild(elems[1]);\r\n  const left = inner.getBoundingClientRect().left;\r\n  outer.style[transformProp] = 'scale(1)';\r\n  const ret = left === inner.getBoundingClientRect().left;\r\n  document.body.removeChild(outer);\r\n  return ret;\r\n}\r\n\r\nexport default ItemDrag;\r\n","/**\r\n * Muuri Queue\r\n * Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/src/Queue/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\n/**\r\n * Queue constructor.\r\n *\r\n * @class\r\n */\r\nclass Queue extends Component {\r\n  constructor() {\r\n    super();\r\n    this._queue = [];\r\n    this._isDestroyed = false;\r\n  };\r\n\r\n  /**\r\n  * Public prototype methods\r\n  * ************************\r\n  */\r\n\r\n  /**\r\n  * Add callback to the queue.\r\n  *\r\n  * @public\r\n  * @memberof Queue.prototype\r\n  * @param {Function} callback\r\n  * @returns {Queue}\r\n  */\r\n  add(callback) {\r\n    if (this._isDestroyed) return this;\r\n    this._queue.push(callback);\r\n    return this;\r\n  };\r\n\r\n  /**\r\n  * Process queue callbacks and reset the queue.\r\n  *\r\n  * @public\r\n  * @memberof Queue.prototype\r\n  * @param {*} arg1\r\n  * @param {*} arg2\r\n  * @returns {Queue}\r\n  */\r\n  flush(arg1, arg2) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const queue = this._queue;\r\n    const length = queue.length;\r\n    let i;\r\n\r\n    // Quit early if the queue is empty.\r\n    if (!length) return this;\r\n\r\n    const singleCallback = length === 1;\r\n    const snapshot = singleCallback ? queue[0] : queue.slice(0);\r\n\r\n    // Reset queue.\r\n    queue.length = 0;\r\n\r\n    // If we only have a single callback let's just call it.\r\n    if (singleCallback) {\r\n      snapshot(arg1, arg2);\r\n      return this;\r\n    }\r\n\r\n    // If we have multiple callbacks, let's process them.\r\n    for (i = 0; i < length; i++) {\r\n      snapshot[i](arg1, arg2);\r\n      if (this._isDestroyed) break;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n  * Destroy Queue instance.\r\n  *\r\n  * @public\r\n  * @memberof Queue.prototype\r\n  * @returns {Queue}\r\n  */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n\r\n    this._isDestroyed = true;\r\n    this._queue.length = 0;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Queue;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\nimport { addLayoutTick, cancelLayoutTick } from '../ticker.js';\r\n\r\nimport Queue from '../Queue/Queue.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport getTranslate from '../utils/getTranslate.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport setStyles from '../utils/setStyles.js';\r\n\r\n/**\r\n * Layout manager for Item instance.\r\n *\r\n * @class\r\n * @param {Item} item\r\n */\r\nclass ItemLayout extends Component {\r\n  constructor(item) {\r\n    super(item);\r\n    this._item = item;\r\n    this._isActive = false;\r\n    this._isDestroyed = false;\r\n    this._isInterrupted = false;\r\n    this._currentStyles = {};\r\n    this._targetStyles = {};\r\n    this._currentLeft = 0;\r\n    this._currentTop = 0;\r\n    this._offsetLeft = 0;\r\n    this._offsetTop = 0;\r\n    this._skipNextAnimation = false;\r\n    this._animateOptions = {\r\n      onFinish: this._finish.bind(this)\r\n    };\r\n    this._queue = new Queue();\r\n\r\n    // Bind animation handlers and finish method.\r\n    this._setupAnimation = this._setupAnimation.bind(this);\r\n    this._startAnimation = this._startAnimation.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Start item layout based on it's current data.\r\n   *\r\n   * @public\r\n   * @memberof ItemLayout.prototype\r\n   * @param {Boolean} [instant=false]\r\n   * @param {Function} [onFinish]\r\n   * @returns {ItemLayout}\r\n   */\r\n  start(instant, onFinish) {\r\n    if (this._isDestroyed) return;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const release = item._release;\r\n    const gridSettings = item.getGrid()._settings;\r\n    const isPositioning = this._isActive;\r\n    const isJustReleased = release._isActive && release._isPositioningStarted === false;\r\n    const animDuration = isJustReleased\r\n      ? gridSettings.dragReleaseDuration\r\n      : gridSettings.layoutDuration;\r\n    const animEasing = isJustReleased ? gridSettings.dragReleaseEasing : gridSettings.layoutEasing;\r\n    const animEnabled = !instant && !this._skipNextAnimation && animDuration > 0;\r\n    let isAnimating;\r\n\r\n    // If the item is currently positioning process current layout callback\r\n    // queue with interrupted flag on.\r\n    if (isPositioning) this._queue.flush(true, item);\r\n\r\n    // Mark release positioning as started.\r\n    if (isJustReleased) release._isPositioningStarted = true;\r\n\r\n    // Push the callback to the callback queue.\r\n    if (typeof onFinish === 'function') this._queue.add(onFinish);\r\n\r\n    // If no animations are needed, easy peasy!\r\n    if (!animEnabled) {\r\n      this._updateOffsets();\r\n      this._updateTargetStyles();\r\n      isPositioning && cancelLayoutTick(item._id);\r\n      isAnimating = item._animate.isAnimating();\r\n      this.stop(false, this._targetStyles);\r\n      !isAnimating && setStyles(element, this._targetStyles);\r\n      this._skipNextAnimation = false;\r\n      return this._finish();\r\n    }\r\n\r\n    // Set item active and store some data for the animation that is about to be\r\n    // triggered.\r\n    this._isActive = true;\r\n    this._animateOptions.easing = animEasing;\r\n    this._animateOptions.duration = animDuration;\r\n    this._isInterrupted = isPositioning;\r\n\r\n    // Start the item's layout animation in the next tick.\r\n    addLayoutTick(item._id, this._setupAnimation, this._startAnimation);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Stop item's position animation if it is currently animating.\r\n   *\r\n   * @public\r\n   * @memberof ItemLayout.prototype\r\n   * @param {Boolean} [processCallbackQueue=false]\r\n   * @param {Object} [targetStyles]\r\n   * @returns {ItemLayout}\r\n   */\r\n  stop(processCallbackQueue, targetStyles) {\r\n    if (this._isDestroyed || !this._isActive) return this;\r\n\r\n    const item = this._item;\r\n\r\n    // Cancel animation init.\r\n    cancelLayoutTick(item._id);\r\n\r\n    // Stop animation.\r\n    item._animate.stop(targetStyles);\r\n\r\n    // Remove positioning class.\r\n    removeClass(item._element, item.getGrid()._settings.itemPositioningClass);\r\n\r\n    // Reset active state.\r\n    this._isActive = false;\r\n\r\n    // Process callback queue if needed.\r\n    if (processCallbackQueue) this._queue.flush(true, item);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy the instance and stop current animation if it is running.\r\n   *\r\n   * @public\r\n   * @memberof ItemLayout.prototype\r\n   * @returns {ItemLayout}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n    this.stop(true, {});\r\n    this._queue.destroy();\r\n    this._item = this._currentStyles = this._targetStyles = this._animateOptions = null;\r\n    this._isDestroyed = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Calculate and update item's current layout offset data.\r\n   *\r\n   * @private\r\n   * @memberof ItemLayout.prototype\r\n   */\r\n  _updateOffsets() {\r\n    if (this._isDestroyed) return;\r\n\r\n    const item = this._item;\r\n    const migrate = item._migrate;\r\n    const release = item._release;\r\n\r\n    this._offsetLeft = release._isActive\r\n      ? release._containerDiffX\r\n      : migrate._isActive\r\n        ? migrate._containerDiffX\r\n        : 0;\r\n\r\n    this._offsetTop = release._isActive\r\n      ? release._containerDiffY\r\n      : migrate._isActive\r\n        ? migrate._containerDiffY\r\n        : 0;\r\n  }\r\n\r\n  /**\r\n   * Calculate and update item's layout target styles.\r\n   *\r\n   * @private\r\n   * @memberof ItemLayout.prototype\r\n   */\r\n  _updateTargetStyles() {\r\n    if (this._isDestroyed) return;\r\n\r\n    const item = this._item;\r\n\r\n    this._targetStyles.transform = getTranslateString(\r\n      item._left + this._offsetLeft,\r\n      item._top + this._offsetTop\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Finish item layout procedure.\r\n   *\r\n   * @private\r\n   * @memberof ItemLayout.prototype\r\n   */\r\n  _finish() {\r\n    if (this._isDestroyed) return;\r\n\r\n    const item = this._item;\r\n    const migrate = item._migrate;\r\n    const release = item._release;\r\n\r\n    // Mark the item as inactive and remove positioning classes.\r\n    if (this._isActive) {\r\n      this._isActive = false;\r\n      removeClass(item._element, item.getGrid()._settings.itemPositioningClass);\r\n    }\r\n\r\n    // Finish up release and migration.\r\n    if (release._isActive) release.stop();\r\n    if (migrate._isActive) migrate.stop();\r\n\r\n    // Process the callback queue.\r\n    this._queue.flush(false, item);\r\n  }\r\n\r\n  /**\r\n   * Prepare item for layout animation.\r\n   *\r\n   * @private\r\n   * @memberof ItemLayout.prototype\r\n   */\r\n  _setupAnimation() {\r\n    const element = this._item._element;\r\n    const translate = getTranslate(element);\r\n    this._currentLeft = translate.x;\r\n    this._currentTop = translate.y;\r\n  }\r\n\r\n  /**\r\n   * Start layout animation.\r\n   *\r\n   * @private\r\n   * @memberof ItemLayout.prototype\r\n   */\r\n  _startAnimation() {\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = item.getGrid();\r\n    const settings = grid._settings;\r\n\r\n    // Let's update the offset data and target styles.\r\n    this._updateOffsets();\r\n    this._updateTargetStyles();\r\n\r\n    // If the item is already in correct position let's quit early.\r\n    if (\r\n      item._left === this._currentLeft - this._offsetLeft &&\r\n      item._top === this._currentTop - this._offsetTop\r\n    ) {\r\n      if (this._isInterrupted) this.stop(false, this._targetStyles);\r\n      this._isActive = false;\r\n      this._finish();\r\n      return;\r\n    }\r\n\r\n    // Set item's positioning class if needed.\r\n    !this._isInterrupted && addClass(element, settings.itemPositioningClass);\r\n\r\n    // Get current styles for animation.\r\n    this._currentStyles.transform = getTranslateString(this._currentLeft, this._currentTop);\r\n\r\n    // Animate.\r\n    item._animate.start(this._currentStyles, this._targetStyles, this._animateOptions);\r\n  }\r\n}\r\n\r\nexport default ItemLayout;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\nimport { eventBeforeSend, eventBeforeReceive, eventSend, eventReceive } from '../shared.js';\r\n\r\nimport ItemDrag from './ItemDrag.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport getOffsetDiff from '../utils/getOffsetDiff.js';\r\nimport getTranslate from '../utils/getTranslate.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport arrayInsert from '../utils/arrayInsert.js';\r\nimport normalizeArrayIndex from '../utils/normalizeArrayIndex.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport setStyles from '../utils/setStyles.js';\r\nimport { transformProp } from '../utils/supportedTransform.js';\r\n\r\nconst tempStyles = {};\r\n\r\n/**\r\n * The migrate process handler constructor.\r\n *\r\n * @class\r\n * @param {Item} item\r\n */\r\nclass ItemMigrate extends Component {\r\n  constructor(item) {\r\n    super(item);\r\n    // Private props.\r\n    this._item = item;\r\n    this._isActive = false;\r\n    this._isDestroyed = false;\r\n    this._container = false;\r\n    this._containerDiffX = 0;\r\n    this._containerDiffY = 0;\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Start the migrate process of an item.\r\n   *\r\n   * @public\r\n   * @memberof ItemMigrate.prototype\r\n   * @param {Grid} targetGrid\r\n   * @param {GridSingleItemQuery} position\r\n   * @param {HTMLElement} [container]\r\n   * @returns {ItemMigrate}\r\n   */\r\n  start(targetGrid, position, container) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const isVisible = item.isVisible();\r\n    const grid = item.getGrid();\r\n    const settings = grid._settings;\r\n    const targetSettings = targetGrid._settings;\r\n    const targetElement = targetGrid._element;\r\n    const targetItems = targetGrid._items;\r\n    const currentIndex = grid._items.indexOf(item);\r\n    const targetContainer = container || document.body;\r\n    let targetIndex;\r\n    let targetItem;\r\n    let currentContainer;\r\n    let offsetDiff;\r\n    let containerDiff;\r\n    let translate;\r\n    let translateX;\r\n    let translateY;\r\n\r\n    // Get target index.\r\n    if (typeof position === 'number') {\r\n      targetIndex = normalizeArrayIndex(targetItems, position, true);\r\n    } else {\r\n      targetItem = targetGrid._getItem(position);\r\n      /** @todo Consider throwing an error here instead of silently failing. */\r\n      if (!targetItem) return this;\r\n      targetIndex = targetItems.indexOf(targetItem);\r\n    }\r\n\r\n    // Get current translateX and translateY values if needed.\r\n    if (item.isPositioning() || this._isActive || item.isReleasing()) {\r\n      translate = getTranslate(element);\r\n      translateX = translate.x;\r\n      translateY = translate.y;\r\n    }\r\n\r\n    // Abort current positioning.\r\n    if (item.isPositioning()) {\r\n      item._layout.stop(true, { transform: getTranslateString(translateX, translateY) });\r\n    }\r\n\r\n    // Abort current migration.\r\n    if (this._isActive) {\r\n      translateX -= this._containerDiffX;\r\n      translateY -= this._containerDiffY;\r\n      this.stop(true, { transform: getTranslateString(translateX, translateY) });\r\n    }\r\n\r\n    // Abort current release.\r\n    if (item.isReleasing()) {\r\n      translateX -= item._release._containerDiffX;\r\n      translateY -= item._release._containerDiffY;\r\n      item._release.stop(true, { transform: getTranslateString(translateX, translateY) });\r\n    }\r\n\r\n    // Stop current visibility animations.\r\n    item._visibility._stopAnimation();\r\n\r\n    // Destroy current drag.\r\n    if (item._drag) item._drag.destroy();\r\n\r\n    // Process current visibility animation queue.\r\n    item._visibility._queue.flush(true, item);\r\n\r\n    // Emit beforeSend event.\r\n    if (grid._hasListeners(eventBeforeSend)) {\r\n      grid._emit(eventBeforeSend, {\r\n        item,\r\n        fromGrid: grid,\r\n        fromIndex: currentIndex,\r\n        toGrid: targetGrid,\r\n        toIndex: targetIndex\r\n      });\r\n    }\r\n\r\n    // Emit beforeReceive event.\r\n    if (targetGrid._hasListeners(eventBeforeReceive)) {\r\n      targetGrid._emit(eventBeforeReceive, {\r\n        item,\r\n        fromGrid: grid,\r\n        fromIndex: currentIndex,\r\n        toGrid: targetGrid,\r\n        toIndex: targetIndex\r\n      });\r\n    }\r\n\r\n    // Remove current classnames.\r\n    removeClass(element, settings.itemClass);\r\n    removeClass(element, settings.itemVisibleClass);\r\n    removeClass(element, settings.itemHiddenClass);\r\n\r\n    // Add new classnames.\r\n    addClass(element, targetSettings.itemClass);\r\n    addClass(element, isVisible ? targetSettings.itemVisibleClass : targetSettings.itemHiddenClass);\r\n\r\n    // Move item instance from current grid to target grid.\r\n    grid._items.splice(currentIndex, 1);\r\n    arrayInsert(targetItems, item, targetIndex);\r\n\r\n    // Update item's grid id reference.\r\n    item._gridId = targetGrid._id;\r\n\r\n    // Get current container.\r\n    currentContainer = element.parentNode;\r\n\r\n    // Move the item inside the target container if it's different than the\r\n    // current container.\r\n    if (targetContainer !== currentContainer) {\r\n      targetContainer.appendChild(element);\r\n      offsetDiff = getOffsetDiff(targetContainer, currentContainer, true);\r\n      if (!translate) {\r\n        translate = getTranslate(element);\r\n        translateX = translate.x;\r\n        translateY = translate.y;\r\n      }\r\n      element.style[transformProp] = getTranslateString(\r\n        translateX + offsetDiff.left,\r\n        translateY + offsetDiff.top\r\n      );\r\n    }\r\n\r\n    // Update child element's styles to reflect the current visibility state.\r\n    item._child.removeAttribute('style');\r\n    setStyles(item._child, isVisible ? targetSettings.visibleStyles : targetSettings.hiddenStyles);\r\n\r\n    // Update display style.\r\n    element.style.display = isVisible ? 'block' : 'hidden';\r\n\r\n    // Get offset diff for the migration data.\r\n    containerDiff = getOffsetDiff(targetContainer, targetElement, true);\r\n\r\n    // Update item's cached dimensions and sort data.\r\n    item._refreshDimensions();\r\n    item._refreshSortData();\r\n\r\n    // Create new drag handler.\r\n    item._drag = targetSettings.dragEnabled ? new ItemDrag(item) : null;\r\n\r\n    // Setup migration data.\r\n    this._isActive = true;\r\n    this._container = targetContainer;\r\n    this._containerDiffX = containerDiff.left;\r\n    this._containerDiffY = containerDiff.top;\r\n\r\n    // Emit send event.\r\n    if (grid._hasListeners(eventSend)) {\r\n      grid._emit(eventSend, {\r\n        item,\r\n        fromGrid: grid,\r\n        fromIndex: currentIndex,\r\n        toGrid: targetGrid,\r\n        toIndex: targetIndex\r\n      });\r\n    }\r\n\r\n    // Emit receive event.\r\n    if (targetGrid._hasListeners(eventReceive)) {\r\n      targetGrid._emit(eventReceive, {\r\n        item,\r\n        fromGrid: grid,\r\n        fromIndex: currentIndex,\r\n        toGrid: targetGrid,\r\n        toIndex: targetIndex\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * End the migrate process of an item. This method can be used to abort an\r\n   * ongoing migrate process (animation) or finish the migrate process.\r\n   *\r\n   * @public\r\n   * @memberof ItemMigrate.prototype\r\n   * @param {Boolean} [abort=false]\r\n   *  - Should the migration be aborted?\r\n   * @param {Object} [currentStyles]\r\n   *  - Optional current translateX and translateY styles.\r\n   * @returns {ItemMigrate}\r\n   */\r\n  stop(abort, currentStyles) {\r\n    if (this._isDestroyed || !this._isActive) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = item.getGrid();\r\n    const gridElement = grid._element;\r\n    let translate;\r\n\r\n    if (this._container !== gridElement) {\r\n      if (!currentStyles) {\r\n        if (abort) {\r\n          translate = getTranslate(element);\r\n          tempStyles.transform = getTranslateString(\r\n            translate.x - this._containerDiffX,\r\n            translate.y - this._containerDiffY\r\n          );\r\n        } else {\r\n          tempStyles.transform = getTranslateString(item._left, item._top);\r\n        }\r\n        currentStyles = tempStyles;\r\n      }\r\n      gridElement.appendChild(element);\r\n      setStyles(element, currentStyles);\r\n    }\r\n\r\n    this._isActive = false;\r\n    this._container = null;\r\n    this._containerDiffX = 0;\r\n    this._containerDiffY = 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy instance.\r\n   *\r\n   * @public\r\n   * @memberof ItemMigrate.prototype\r\n   * @returns {ItemMigrate}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n    this.stop(true);\r\n    this._item = null;\r\n    this._isDestroyed = true;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default ItemMigrate;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\nimport { Component } from 'react';\r\n\r\nimport { eventDragReleaseStart, eventDragReleaseEnd } from '../shared.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport getTranslate from '../utils/getTranslate.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport setStyles from '../utils/setStyles.js';\r\n\r\nconst tempStyles = {};\r\n\r\n/**\r\n * The release process handler constructor. Although this might seem as proper\r\n * fit for the drag process this needs to be separated into it's own logic\r\n * because there might be a scenario where drag is disabled, but the release\r\n * process still needs to be implemented (dragging from a grid to another).\r\n *\r\n * @class\r\n * @param {Item} item\r\n */\r\nclass ItemRelease extends Component {\r\n  constructor(item) {\r\n    super(item);\r\n    this._item = item;\r\n    this._isActive = false;\r\n    this._isDestroyed = false;\r\n    this._isPositioningStarted = false;\r\n    this._containerDiffX = 0;\r\n    this._containerDiffY = 0;\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Start the release process of an item.\r\n   *\r\n   * @public\r\n   * @memberof ItemRelease.prototype\r\n   * @returns {ItemRelease}\r\n   */\r\n  start() {\r\n    if (this._isDestroyed || this._isActive) return this;\r\n\r\n    const item = this._item;\r\n    const grid = item.getGrid();\r\n\r\n    // Flag release as active.\r\n    this._isActive = true;\r\n\r\n    // Add release class name to the released element.\r\n    addClass(item._element, grid._settings.itemReleasingClass);\r\n\r\n    // Emit dragReleaseStart event.\r\n    grid._emit(eventDragReleaseStart, item);\r\n\r\n    // Position the released item.\r\n    item._layout.start(false);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * End the release process of an item. This method can be used to abort an\r\n   * ongoing release process (animation) or finish the release process.\r\n   *\r\n   * @public\r\n   * @memberof ItemRelease.prototype\r\n   * @param {Boolean} [abort=false]\r\n   *  - Should the release be aborted? When true, the release end event won't be\r\n   *    emitted. Set to true only when you need to abort the release process\r\n   *    while the item is animating to it's position.\r\n   * @param {Object} [currentStyles]\r\n   *  - Optional current translateX and translateY styles.\r\n   * @returns {ItemRelease}\r\n   */\r\n  stop(abort, currentStyles) {\r\n    if (this._isDestroyed || !this._isActive) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = item.getGrid();\r\n    const container = grid._element;\r\n    let translate;\r\n\r\n    // Reset data and remove releasing class name from the element.\r\n    this._reset();\r\n\r\n    // If the released element is outside the grid's container element put it\r\n    // back there and adjust position accordingly.\r\n    if (element.parentNode !== container) {\r\n      if (!currentStyles) {\r\n        if (abort) {\r\n          translate = getTranslate(element);\r\n          tempStyles.transform = getTranslateString(\r\n            translate.x - this._containerDiffX,\r\n            translate.y - this._containerDiffY\r\n          );\r\n        } else {\r\n          tempStyles.transform = getTranslateString(item._left, item._top);\r\n        }\r\n        currentStyles = tempStyles;\r\n      }\r\n      container.appendChild(element);\r\n      setStyles(element, currentStyles);\r\n    }\r\n\r\n    // Emit dragReleaseEnd event.\r\n    if (!abort) grid._emit(eventDragReleaseEnd, item);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy instance.\r\n   *\r\n   * @public\r\n   * @memberof ItemRelease.prototype\r\n   * @returns {ItemRelease}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n    this.stop(true);\r\n    this._item = null;\r\n    this._isDestroyed = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Reset public data and remove releasing class.\r\n   *\r\n   * @private\r\n   * @memberof ItemRelease.prototype\r\n   */\r\n  _reset() {\r\n    if (this._isDestroyed) return;\r\n    const item = this._item;\r\n    this._isActive = false;\r\n    this._isPositioningStarted = false;\r\n    this._containerDiffX = 0;\r\n    this._containerDiffY = 0;\r\n    removeClass(item._element, item.getGrid()._settings.itemReleasingClass);\r\n  }\r\n}\r\n\r\nexport default ItemRelease;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport getStyle from './getStyle.js';\r\nimport getStyleName from './getStyleName.js';\r\n\r\n/**\r\n * Get current values of the provided styles definition object.\r\n *\r\n * @param {HTMLElement} element\r\n * @param {Object} styles\r\n * @return {Object}\r\n */\r\nexport default function getCurrentStyles(element, styles) {\r\n  const current = {};\r\n  for (const prop in styles) {\r\n    current[prop] = getStyle(element, getStyleName(prop));\r\n  }\r\n  return current;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\nimport { addVisibilityTick, cancelVisibilityTick } from '../ticker.js';\r\n\r\nimport Queue from '../Queue/Queue.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport getCurrentStyles from '../utils/getCurrentStyles.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport setStyles from '../utils/setStyles.js';\r\n\r\n/**\r\n * Visibility manager for Item instance.\r\n *\r\n * @class\r\n * @param {Item} item\r\n */\r\nclass ItemVisibility extends Component {\r\n  constructor(item) {\r\n    super(item);\r\n    const isActive = item._isActive;\r\n    const element = item._element;\r\n    const settings = item.getGrid()._settings;\r\n\r\n    this._item = item;\r\n    this._isDestroyed = false;\r\n\r\n    // Set up visibility states.\r\n    this._isHidden = !isActive;\r\n    this._isHiding = false;\r\n    this._isShowing = false;\r\n\r\n    // Callback queue.\r\n    this._queue = new Queue();\r\n\r\n    // Bind show/hide finishers.\r\n    this._finishShow = this._finishShow.bind(this);\r\n    this._finishHide = this._finishHide.bind(this);\r\n\r\n    // Force item to be either visible or hidden on init.\r\n    element.style.display = isActive ? 'block' : 'none';\r\n\r\n    // Set visible/hidden class.\r\n    addClass(element, isActive ? settings.itemVisibleClass : settings.itemHiddenClass);\r\n\r\n    // Set initial styles for the child element.\r\n    setStyles(item._child, isActive ? settings.visibleStyles : settings.hiddenStyles);\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Show item.\r\n   *\r\n   * @public\r\n   * @memberof ItemVisibility.prototype\r\n   * @param {Boolean} instant\r\n   * @param {Function} [onFinish]\r\n   * @returns {ItemVisibility}\r\n   */\r\n  show(instant, onFinish) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const queue = this._queue;\r\n    const callback = typeof onFinish === 'function' ? onFinish : null;\r\n    const grid = item.getGrid();\r\n    const settings = grid._settings;\r\n\r\n    // If item is visible call the callback and be done with it.\r\n    if (!this._isShowing && !this._isHidden) {\r\n      callback && callback(false, item);\r\n      return this;\r\n    }\r\n\r\n    // If item is showing and does not need to be shown instantly, let's just\r\n    // push callback to the callback queue and be done with it.\r\n    if (this._isShowing && !instant) {\r\n      callback && queue.add(callback);\r\n      return this;\r\n    }\r\n\r\n    // If the item is hiding or hidden process the current visibility callback\r\n    // queue with the interrupted flag active, update classes and set display\r\n    // to block if necessary.\r\n    if (!this._isShowing) {\r\n      queue.flush(true, item);\r\n      removeClass(element, settings.itemHiddenClass);\r\n      addClass(element, settings.itemVisibleClass);\r\n      if (!this._isHiding) element.style.display = 'block';\r\n    }\r\n\r\n    // Push callback to the callback queue.\r\n    callback && queue.add(callback);\r\n\r\n    // Update visibility states.\r\n    item._isActive = this._isShowing = true;\r\n    this._isHiding = this._isHidden = false;\r\n\r\n    // Finally let's start show animation.\r\n    this._startAnimation(true, instant, this._finishShow);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hide item.\r\n   *\r\n   * @public\r\n   * @memberof ItemVisibility.prototype\r\n   * @param {Boolean} instant\r\n   * @param {Function} [onFinish]\r\n   * @returns {ItemVisibility}\r\n   */\r\n  hide(instant, onFinish) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const queue = this._queue;\r\n    const callback = typeof onFinish === 'function' ? onFinish : null;\r\n    const grid = item.getGrid();\r\n    const settings = grid._settings;\r\n\r\n    // If item is already hidden call the callback and be done with it.\r\n    if (!this._isHiding && this._isHidden) {\r\n      callback && callback(false, item);\r\n      return this;\r\n    }\r\n\r\n    // If item is hiding and does not need to be hidden instantly, let's just\r\n    // push callback to the callback queue and be done with it.\r\n    if (this._isHiding && !instant) {\r\n      callback && queue.add(callback);\r\n      return this;\r\n    }\r\n\r\n    // If the item is showing or visible process the current visibility callback\r\n    // queue with the interrupted flag active, update classes and set display\r\n    // to block if necessary.\r\n    if (!this._isHiding) {\r\n      queue.flush(true, item);\r\n      addClass(element, settings.itemHiddenClass);\r\n      removeClass(element, settings.itemVisibleClass);\r\n    }\r\n\r\n    // Push callback to the callback queue.\r\n    callback && queue.add(callback);\r\n\r\n    // Update visibility states.\r\n    this._isHidden = this._isHiding = true;\r\n    item._isActive = this._isShowing = false;\r\n\r\n    // Finally let's start hide animation.\r\n    this._startAnimation(false, instant, this._finishHide);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy the instance and stop current animation if it is running.\r\n   *\r\n   * @public\r\n   * @memberof ItemVisibility.prototype\r\n   * @returns {ItemVisibility}\r\n   */\r\n  destroy() {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const item = this._item;\r\n    const element = item._element;\r\n    const grid = item.getGrid();\r\n    const queue = this._queue;\r\n    const settings = grid._settings;\r\n\r\n    // Stop visibility animation.\r\n    this._stopAnimation({});\r\n\r\n    // Fire all uncompleted callbacks with interrupted flag and destroy the queue.\r\n    queue.flush(true, item).destroy();\r\n\r\n    // Remove visible/hidden classes.\r\n    removeClass(element, settings.itemVisibleClass);\r\n    removeClass(element, settings.itemHiddenClass);\r\n\r\n    // Reset state.\r\n    this._item = null;\r\n    this._isHiding = this._isShowing = false;\r\n    this._isDestroyed = this._isHidden = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Start visibility animation.\r\n   *\r\n   * @private\r\n   * @memberof ItemVisibility.prototype\r\n   * @param {Boolean} toVisible\r\n   * @param {Boolean} [instant]\r\n   * @param {Function} [onFinish]\r\n   */\r\n  _startAnimation(toVisible, instant, onFinish) {\r\n    if (this._isDestroyed) return;\r\n\r\n    const item = this._item;\r\n    const settings = item.getGrid()._settings;\r\n    const targetStyles = toVisible ? settings.visibleStyles : settings.hiddenStyles;\r\n    const duration = parseInt(toVisible ? settings.showDuration : settings.hideDuration) || 0;\r\n    const easing = (toVisible ? settings.showEasing : settings.hideEasing) || 'ease';\r\n    const isInstant = instant || duration <= 0;\r\n    let currentStyles;\r\n\r\n    // No target styles? Let's quit early.\r\n    if (!targetStyles) {\r\n      onFinish && onFinish();\r\n      return;\r\n    }\r\n\r\n    // Cancel queued visibility tick.\r\n    cancelVisibilityTick(item._id);\r\n\r\n    // If we need to apply the styles instantly without animation.\r\n    if (isInstant) {\r\n      if (item._animateChild.isAnimating()) {\r\n        item._animateChild.stop(targetStyles);\r\n      } else {\r\n        setStyles(item._child, targetStyles);\r\n      }\r\n      onFinish && onFinish();\r\n      return;\r\n    }\r\n\r\n    // Start the animation in the next tick (to avoid layout thrashing).\r\n    addVisibilityTick(\r\n      item._id,\r\n      () => {\r\n        currentStyles = getCurrentStyles(item._child, targetStyles);\r\n      },\r\n      () => {\r\n        item._animateChild.start(currentStyles, targetStyles, {\r\n          duration,\r\n          easing,\r\n          onFinish\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Stop visibility animation.\r\n   *\r\n   * @private\r\n   * @memberof ItemVisibility.prototype\r\n   * @param {Object} [targetStyles]\r\n   */\r\n  _stopAnimation(targetStyles) {\r\n    if (this._isDestroyed) return;\r\n    const item = this._item;\r\n    cancelVisibilityTick(item._id);\r\n    item._animateChild.stop(targetStyles);\r\n  }\r\n\r\n  /**\r\n   * Finish show procedure.\r\n   *\r\n   * @private\r\n   * @memberof ItemVisibility.prototype\r\n   */\r\n  _finishShow() {\r\n    if (this._isHidden) return;\r\n    this._isShowing = false;\r\n    this._queue.flush(false, this._item);\r\n  }\r\n\r\n  _finishHide() {\r\n    if (!this._isHidden) return;\r\n    const item = this._item;\r\n    this._isHiding = false;\r\n    finishStyles.transform = getTranslateString(0, 0);\r\n    item._layout.stop(true, finishStyles);\r\n    item._element.style.display = 'none';\r\n    this._queue.flush(false, item);\r\n  }\r\n}\r\n\r\n/**\r\n * Finish hide procedure.\r\n *\r\n * @private\r\n * @memberof ItemVisibility.prototype\r\n */\r\nconst finishStyles = {};\r\n\r\nexport default ItemVisibility;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nlet id = 0;\r\n\r\n/**\r\n * Returns a unique numeric id (increments a base value on every call).\r\n * @returns {Number}\r\n */\r\nexport default function createUid() {\r\n  return ++id;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { gridInstances } from '../shared.js';\r\n\r\nimport ItemAnimate from './ItemAnimate.js';\r\nimport ItemDrag from './ItemDrag.js';\r\nimport ItemLayout from './ItemLayout.js';\r\nimport ItemMigrate from './ItemMigrate.js';\r\nimport ItemRelease from './ItemRelease.js';\r\nimport ItemVisibility from './ItemVisibility.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport createUid from '../utils/createUid.js';\r\nimport getStyle from '../utils/getStyle.js';\r\nimport getStyleAsFloat from '../utils/getStyleAsFloat.js';\r\nimport getTranslateString from '../utils/getTranslateString.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport { transformProp } from '../utils/supportedTransform.js';\r\n\r\n/**\r\n * Creates a new Item instance for a Grid instance.\r\n *\r\n * @class\r\n * @param {Grid} grid\r\n * @param {HTMLElement} element\r\n * @param {Boolean} [isActive]\r\n */\r\nclass Item {\r\n  constructor(grid, element, isActive) {\r\n    const settings = grid._settings;\r\n\r\n    // Create instance id.\r\n    this._id = createUid();\r\n\r\n    // Reference to connected Grid instance's id.\r\n    this._gridId = grid._id;\r\n\r\n    // Destroyed flag.\r\n    this._isDestroyed = false;\r\n\r\n    // Set up initial positions.\r\n    this._left = 0;\r\n    this._top = 0;\r\n\r\n    // The elements.\r\n    this._element = element;\r\n    this._child = element.children[0];\r\n\r\n    // If the provided item element is not a direct child of the grid container\r\n    // element, append it to the grid container.\r\n    if (element.parentNode !== grid._element) {\r\n      grid._element.appendChild(element);\r\n    }\r\n\r\n    // Set item class.\r\n    addClass(element, settings.itemClass);\r\n\r\n    // If isActive is not defined, let's try to auto-detect it.\r\n    if (typeof isActive !== 'boolean') {\r\n      isActive = getStyle(element, 'display') !== 'none';\r\n    }\r\n\r\n    // Set up active state (defines if the item is considered part of the layout\r\n    // or not).\r\n    this._isActive = isActive;\r\n\r\n    // Set element's initial position styles.\r\n    element.style.left = '0';\r\n    element.style.top = '0';\r\n    element.style[transformProp] = getTranslateString(0, 0);\r\n\r\n    // Initiate item's animation controllers.\r\n    this._animate = new ItemAnimate(element);\r\n    this._animateChild = new ItemAnimate(this._child);\r\n\r\n    // Setup visibility handler.\r\n    this._visibility = new ItemVisibility(this);\r\n\r\n    // Set up layout handler.\r\n    this._layout = new ItemLayout(this);\r\n\r\n    // Set up migration handler data.\r\n    this._migrate = new ItemMigrate(this);\r\n\r\n    // Set up release handler\r\n    this._release = new ItemRelease(this);\r\n\r\n    // Set up drag handler.\r\n    this._drag = settings.dragEnabled ? new ItemDrag(this) : null;\r\n\r\n    // Set up the initial dimensions and sort data.\r\n    this._refreshDimensions();\r\n    this._refreshSortData();\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Get the instance grid reference.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Grid}\r\n   */\r\n  getGrid() {\r\n    return gridInstances[this._gridId];\r\n  }\r\n\r\n  /**\r\n   * Get the instance element.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {HTMLElement}\r\n   */\r\n  getElement() {\r\n    return this._element;\r\n  }\r\n\r\n  /**\r\n   * Get instance element's cached width.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Number}\r\n   */\r\n  getWidth() {\r\n    return this._width;\r\n  }\r\n\r\n  /**\r\n   * Get instance element's cached height.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Number}\r\n   */\r\n  getHeight() {\r\n    return this._height;\r\n  }\r\n\r\n  /**\r\n   * Get instance element's cached margins.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Object}\r\n   *   - The returned object contains left, right, top and bottom properties\r\n   *     which indicate the item element's cached margins.\r\n   */\r\n  getMargin() {\r\n    return {\r\n      left: this._marginLeft,\r\n      right: this._marginRight,\r\n      top: this._marginTop,\r\n      bottom: this._marginBottom\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get instance element's cached position.\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Object}\r\n   *   - The returned object contains left and top properties which indicate the\r\n   *     item element's cached position in the grid.\r\n   */\r\n  getPosition() {\r\n    return {\r\n      left: this._left,\r\n      top: this._top\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Is the item active?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isActive() {\r\n    return this._isActive;\r\n  }\r\n\r\n  /**\r\n   * Is the item visible?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isVisible() {\r\n    return !!this._visibility && !this._visibility._isHidden;\r\n  }\r\n\r\n  /**\r\n   * Is the item being animated to visible?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isShowing() {\r\n    return !!(this._visibility && this._visibility._isShowing);\r\n  }\r\n\r\n  /**\r\n   * Is the item being animated to hidden?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isHiding() {\r\n    return !!(this._visibility && this._visibility._isHiding);\r\n  }\r\n\r\n  /**\r\n   * Is the item positioning?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isPositioning() {\r\n    return !!(this._layout && this._layout._isActive);\r\n  }\r\n\r\n  /**\r\n   * Is the item being dragged?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isDragging() {\r\n    return !!(this._drag && this._drag._isActive);\r\n  }\r\n\r\n  /**\r\n   * Is the item being released?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isReleasing() {\r\n    return !!(this._release && this._release._isActive);\r\n  }\r\n\r\n  /**\r\n   * Is the item destroyed?\r\n   *\r\n   * @public\r\n   * @memberof Item.prototype\r\n   * @returns {Boolean}\r\n   */\r\n  isDestroyed() {\r\n    return this._isDestroyed;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Recalculate item's dimensions.\r\n   *\r\n   * @private\r\n   * @memberof Item.prototype\r\n   */\r\n  _refreshDimensions() {\r\n    if (this._isDestroyed || this._visibility._isHidden) return;\r\n\r\n    const element = this._element;\r\n    const rect = element.getBoundingClientRect();\r\n\r\n    // Calculate width and height.\r\n    this._width = rect.width;\r\n    this._height = rect.height;\r\n\r\n    // Calculate margins (ignore negative margins).\r\n    this._marginLeft = Math.max(0, getStyleAsFloat(element, 'margin-left'));\r\n    this._marginRight = Math.max(0, getStyleAsFloat(element, 'margin-right'));\r\n    this._marginTop = Math.max(0, getStyleAsFloat(element, 'margin-top'));\r\n    this._marginBottom = Math.max(0, getStyleAsFloat(element, 'margin-bottom'));\r\n  }\r\n\r\n  /**\r\n   * Fetch and store item's sort data.\r\n   *\r\n   * @private\r\n   * @memberof Item.prototype\r\n   */\r\n  _refreshSortData() {\r\n    if (this._isDestroyed) return;\r\n\r\n    const data = (this._sortData = {});\r\n    const getters = this.getGrid()._settings.sortData;\r\n    let prop;\r\n\r\n    for (prop in getters) {\r\n      data[prop] = getters[prop](this, this._element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy item instance.\r\n   *\r\n   * @private\r\n   * @memberof Item.prototype\r\n   * @param {Boolean} [removeElement=false]\r\n   */\r\n  _destroy(removeElement) {\r\n    if (this._isDestroyed) return;\r\n\r\n    const element = this._element;\r\n    const grid = this.getGrid();\r\n    const settings = grid._settings;\r\n    const index = grid._items.indexOf(this);\r\n\r\n    // Destroy handlers.\r\n    this._release.destroy();\r\n    this._migrate.destroy();\r\n    this._layout.destroy();\r\n    this._visibility.destroy();\r\n    this._animate.destroy();\r\n    this._animateChild.destroy();\r\n    this._drag && this._drag.destroy();\r\n\r\n    // Remove all inline styles.\r\n    element.removeAttribute('style');\r\n    this._child.removeAttribute('style');\r\n\r\n    // Remove item class.\r\n    removeClass(element, settings.itemClass);\r\n\r\n    // Remove item from Grid instance if it still exists there.\r\n    index > -1 && grid._items.splice(index, 1);\r\n\r\n    // Remove element from DOM.\r\n    removeElement && element.parentNode.removeChild(element);\r\n\r\n    // Reset state.\r\n    this._isActive = false;\r\n    this._isDestroyed = true;\r\n  }\r\n}\r\n\r\nexport default Item;\r\n","/**\r\n * Muuri Packer\r\n * Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/src/Packer/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\n\r\n/**\r\n * This is the default layout algorithm for Muuri. Based on MAXRECTS approach\r\n * as described by Jukka Jylänki in his survey: \"A Thousand Ways to Pack the\r\n * Bin - A Practical Approach to Two-Dimensional Rectangle Bin Packing.\".\r\n *\r\n * @class\r\n */\r\nclass Packer extends Component {\r\n  constructor() {\r\n    super();\r\n    this._slots = [];\r\n    this._slotSizes = [];\r\n    this._freeSlots = [];\r\n    this._newSlots = [];\r\n    this._rectItem = {};\r\n    this._rectStore = [];\r\n    this._rectId = 0;\r\n\r\n    // The layout return data, which will be populated in getLayout.\r\n    this._layout = {\r\n      slots: null,\r\n      setWidth: false,\r\n      setHeight: false,\r\n      width: false,\r\n      height: false\r\n    };\r\n\r\n    // Bind sort handlers.\r\n    this._sortRectsLeftTop = this._sortRectsLeftTop.bind(this);\r\n    this._sortRectsTopLeft = this._sortRectsTopLeft.bind(this);\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   * @memberof Packer.prototype\r\n   * @param {Item[]} items\r\n   * @param {Number} width\r\n   * @param {Number} height\r\n   * @param {Number[]} [slots]\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.fillGaps=false]\r\n   * @param {Boolean} [options.horizontal=false]\r\n   * @param {Boolean} [options.alignRight=false]\r\n   * @param {Boolean} [options.alignBottom=false]\r\n   * @returns {LayoutData}\r\n   */\r\n  getLayout(items, width, height, slots, options) {\r\n    const layout = this._layout;\r\n    const fillGaps = !!(options && options.fillGaps);\r\n    const isHorizontal = !!(options && options.horizontal);\r\n    const alignRight = !!(options && options.alignRight);\r\n    const alignBottom = !!(options && options.alignBottom);\r\n    const rounding = !!(options && options.rounding);\r\n    const slotSizes = this._slotSizes;\r\n    let i;\r\n\r\n    // Reset layout data.\r\n    layout.slots = slots || this._slots;\r\n    layout.width = isHorizontal ? 0 : rounding ? Math.round(width) : width;\r\n    layout.height = !isHorizontal ? 0 : rounding ? Math.round(height) : height;\r\n    layout.setWidth = isHorizontal;\r\n    layout.setHeight = !isHorizontal;\r\n\r\n    // Make sure slots and slot size arrays are reset.\r\n    layout.slots.length = 0;\r\n    slotSizes.length = 0;\r\n\r\n    // No need to go further if items do not exist.\r\n    if (!items.length) return layout;\r\n\r\n    // Find slots for items.\r\n    for (i = 0; i < items.length; i++) {\r\n      this._addSlot(items[i], isHorizontal, fillGaps, rounding, alignRight || alignBottom);\r\n    }\r\n\r\n    // If the alignment is set to right we need to adjust the results.\r\n    if (alignRight) {\r\n      for (i = 0; i < layout.slots.length; i = i + 2) {\r\n        layout.slots[i] = layout.width - (layout.slots[i] + slotSizes[i]);\r\n      }\r\n    }\r\n\r\n    // If the alignment is set to bottom we need to adjust the results.\r\n    if (alignBottom) {\r\n      for (i = 1; i < layout.slots.length; i = i + 2) {\r\n        layout.slots[i] = layout.height - (layout.slots[i] + slotSizes[i]);\r\n      }\r\n    }\r\n\r\n    // Reset slots arrays and rect id.\r\n    slotSizes.length = 0;\r\n    this._freeSlots.length = 0;\r\n    this._newSlots.length = 0;\r\n    this._rectId = 0;\r\n\r\n    return layout;\r\n  }\r\n\r\n  /**\r\n   * Add a new rectangle to the rectangle store. Returns the id of the new\r\n   * rectangle.\r\n   *\r\n   * @private\r\n   * @memberof Packer.prototype\r\n   * @param {Number} left\r\n   * @param {Number} top\r\n   * @param {Number} width\r\n   * @param {Number} height\r\n   * @returns {RectId}\r\n   */\r\n  _addRect(left, top, width, height) {\r\n    const rectId = ++this._rectId;\r\n    const rectStore = this._rectStore;\r\n\r\n    rectStore[rectId] = left || 0;\r\n    rectStore[++this._rectId] = top || 0;\r\n    rectStore[++this._rectId] = width || 0;\r\n    rectStore[++this._rectId] = height || 0;\r\n\r\n    return rectId;\r\n  }\r\n\r\n  /**\r\n   * Get rectangle data from the rectangle store by id. Optionally you can\r\n   * provide a target object where the rectangle data will be written in. By\r\n   * default an internal object is reused as a target object.\r\n   *\r\n   * @private\r\n   * @memberof Packer.prototype\r\n   * @param {RectId} id\r\n   * @param {Object} [target]\r\n   * @returns {Object}\r\n   */\r\n  _getRect(id, target) {\r\n    const rectItem = target || this._rectItem;\r\n    const rectStore = this._rectStore;\r\n\r\n    rectItem.left = rectStore[id] || 0;\r\n    rectItem.top = rectStore[++id] || 0;\r\n    rectItem.width = rectStore[++id] || 0;\r\n    rectItem.height = rectStore[++id] || 0;\r\n\r\n    return rectItem;\r\n  }\r\n\r\n  /**\r\n   * Check if two rectangles overlap.\r\n   *\r\n   * @private\r\n   * @memberof Packer.prototype\r\n   * @param {Rectangle} a\r\n   * @param {Rectangle} b\r\n   * @returns {Boolean}\r\n   */\r\n  _doRectsOverlap(a, b) {\r\n    return !(\r\n      a.left + a.width <= b.left ||\r\n      b.left + b.width <= a.left ||\r\n      a.top + a.height <= b.top ||\r\n      b.top + b.height <= a.top\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Check if a rectangle is fully within another rectangle.\r\n   *\r\n   * @private\r\n   * @memberof Packer.prototype\r\n   * @param {Rectangle} a\r\n   * @param {Rectangle} b\r\n   * @returns {Boolean}\r\n   */\r\n  _isRectWithinRect(a, b) {\r\n    return (\r\n      a.left >= b.left &&\r\n      a.top >= b.top &&\r\n      a.left + a.width <= b.left + b.width &&\r\n      a.top + a.height <= b.top + b.height\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate position for the layout item. Returns the left and top position\r\n * of the item in pixels.\r\n *\r\n * @private\r\n * @memberof Packer.prototype\r\n * @param {Item} item\r\n * @param {Boolean} isHorizontal\r\n * @param {Boolean} fillGaps\r\n * @param {Boolean} rounding\r\n * @returns {Array}\r\n */\r\nPacker.prototype._addSlot = ((() => {\r\n  const leeway = 0.001;\r\n  const itemSlot = {};\r\n  return function(item, isHorizontal, fillGaps, rounding, trackSize) {\r\n    const layout = this._layout;\r\n    const freeSlots = this._freeSlots;\r\n    const newSlots = this._newSlots;\r\n    let rect;\r\n    let rectId;\r\n    let potentialSlots;\r\n    let ignoreCurrentSlots;\r\n    let i;\r\n    let ii;\r\n\r\n    // Reset new slots.\r\n    newSlots.length = 0;\r\n\r\n    // Set item slot initial data.\r\n    itemSlot.left = null;\r\n    itemSlot.top = null;\r\n    itemSlot.width = item._width + item._marginLeft + item._marginRight;\r\n    itemSlot.height = item._height + item._marginTop + item._marginBottom;\r\n\r\n    // Round item slot width and height if needed.\r\n    if (rounding) {\r\n      itemSlot.width = Math.round(itemSlot.width);\r\n      itemSlot.height = Math.round(itemSlot.height);\r\n    }\r\n\r\n    // Try to find a slot for the item.\r\n    for (i = 0; i < freeSlots.length; i++) {\r\n      rectId = freeSlots[i];\r\n      if (!rectId) continue;\r\n      rect = this._getRect(rectId);\r\n      if (itemSlot.width <= rect.width + leeway && itemSlot.height <= rect.height + leeway) {\r\n        itemSlot.left = rect.left;\r\n        itemSlot.top = rect.top;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // If no slot was found for the item.\r\n    if (itemSlot.left === null) {\r\n      // Position the item in to the bottom left (vertical mode) or top right\r\n      // (horizontal mode) of the grid.\r\n      itemSlot.left = !isHorizontal ? 0 : layout.width;\r\n      itemSlot.top = !isHorizontal ? layout.height : 0;\r\n\r\n      // If gaps don't needs filling do not add any current slots to the new\r\n      // slots array.\r\n      if (!fillGaps) {\r\n        ignoreCurrentSlots = true;\r\n      }\r\n    }\r\n\r\n    // In vertical mode, if the item's bottom overlaps the grid's bottom.\r\n    if (!isHorizontal && itemSlot.top + itemSlot.height > layout.height) {\r\n      // If item is not aligned to the left edge, create a new slot.\r\n      if (itemSlot.left > 0) {\r\n        newSlots.push(this._addRect(0, layout.height, itemSlot.left, Infinity));\r\n      }\r\n\r\n      // If item is not aligned to the right edge, create a new slot.\r\n      if (itemSlot.left + itemSlot.width < layout.width) {\r\n        newSlots.push(\r\n          this._addRect(\r\n            itemSlot.left + itemSlot.width,\r\n            layout.height,\r\n            layout.width - itemSlot.left - itemSlot.width,\r\n            Infinity\r\n          )\r\n        );\r\n      }\r\n\r\n      // Update grid height.\r\n      layout.height = itemSlot.top + itemSlot.height;\r\n    }\r\n\r\n    // In horizontal mode, if the item's right overlaps the grid's right edge.\r\n    if (isHorizontal && itemSlot.left + itemSlot.width > layout.width) {\r\n      // If item is not aligned to the top, create a new slot.\r\n      if (itemSlot.top > 0) {\r\n        newSlots.push(this._addRect(layout.width, 0, Infinity, itemSlot.top));\r\n      }\r\n\r\n      // If item is not aligned to the bottom, create a new slot.\r\n      if (itemSlot.top + itemSlot.height < layout.height) {\r\n        newSlots.push(\r\n          this._addRect(\r\n            layout.width,\r\n            itemSlot.top + itemSlot.height,\r\n            Infinity,\r\n            layout.height - itemSlot.top - itemSlot.height\r\n          )\r\n        );\r\n      }\r\n\r\n      // Update grid width.\r\n      layout.width = itemSlot.left + itemSlot.width;\r\n    }\r\n\r\n    // Clean up the current slots making sure there are no old slots that\r\n    // overlap with the item. If an old slot overlaps with the item, split it\r\n    // into smaller slots if necessary.\r\n    for (i = fillGaps ? 0 : ignoreCurrentSlots ? freeSlots.length : i; i < freeSlots.length; i++) {\r\n      rectId = freeSlots[i];\r\n      if (!rectId) continue;\r\n      rect = this._getRect(rectId);\r\n      potentialSlots = this._splitRect(rect, itemSlot);\r\n      for (ii = 0; ii < potentialSlots.length; ii++) {\r\n        rectId = potentialSlots[ii];\r\n        rect = this._getRect(rectId);\r\n        // Let's make sure here that we have a big enough slot\r\n        // (width/height > 0.49px) and also let's make sure that the slot is\r\n        // within the boundaries of the grid.\r\n        if (\r\n          rect.width > 0.49 &&\r\n          rect.height > 0.49 &&\r\n          ((!isHorizontal && rect.top < layout.height) ||\r\n            (isHorizontal && rect.left < layout.width))\r\n        ) {\r\n          newSlots.push(rectId);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Sanitize new slots.\r\n    if (newSlots.length) {\r\n      this._purgeRects(newSlots).sort(\r\n        isHorizontal ? this._sortRectsLeftTop : this._sortRectsTopLeft\r\n      );\r\n    }\r\n\r\n    // Update layout width/height.\r\n    if (isHorizontal) {\r\n      layout.width = Math.max(layout.width, itemSlot.left + itemSlot.width);\r\n    } else {\r\n      layout.height = Math.max(layout.height, itemSlot.top + itemSlot.height);\r\n    }\r\n\r\n    // Add item slot data to layout slots (and store the slot size for later\r\n    // usage too if necessary).\r\n    layout.slots.push(itemSlot.left, itemSlot.top);\r\n    if (trackSize) this._slotSizes.push(itemSlot.width, itemSlot.height);\r\n\r\n    // Free/new slots switcheroo!\r\n    this._freeSlots = newSlots;\r\n    this._newSlots = freeSlots;\r\n  };\r\n}))();\r\n\r\n/**\r\n * Punch a hole into a rectangle and split the remaining area into smaller\r\n * rectangles (4 at max).\r\n *\r\n * @private\r\n * @memberof Packer.prototype\r\n * @param {Rectangle} rect\r\n * @param {Rectangle} hole\r\n * @returns {RectId[]}\r\n */\r\nPacker.prototype._splitRect = ((() => {\r\n  const results = [];\r\n  return function(rect, hole) {\r\n    // Reset old results.\r\n    results.length = 0;\r\n\r\n    // If the rect does not overlap with the hole add rect to the return data\r\n    // as is.\r\n    if (!this._doRectsOverlap(rect, hole)) {\r\n      results.push(this._addRect(rect.left, rect.top, rect.width, rect.height));\r\n      return results;\r\n    }\r\n\r\n    // Left split.\r\n    if (rect.left < hole.left) {\r\n      results.push(this._addRect(rect.left, rect.top, hole.left - rect.left, rect.height));\r\n    }\r\n\r\n    // Right split.\r\n    if (rect.left + rect.width > hole.left + hole.width) {\r\n      results.push(\r\n        this._addRect(\r\n          hole.left + hole.width,\r\n          rect.top,\r\n          rect.left + rect.width - (hole.left + hole.width),\r\n          rect.height\r\n        )\r\n      );\r\n    }\r\n\r\n    // Top split.\r\n    if (rect.top < hole.top) {\r\n      results.push(this._addRect(rect.left, rect.top, rect.width, hole.top - rect.top));\r\n    }\r\n\r\n    // Bottom split.\r\n    if (rect.top + rect.height > hole.top + hole.height) {\r\n      results.push(\r\n        this._addRect(\r\n          rect.left,\r\n          hole.top + hole.height,\r\n          rect.width,\r\n          rect.top + rect.height - (hole.top + hole.height)\r\n        )\r\n      );\r\n    }\r\n\r\n    return results;\r\n  };\r\n}))();\r\n\r\n/**\r\n * Loops through an array of rectangle ids and resets all that are fully\r\n * within another rectangle in the array. Resetting in this case means that\r\n * the rectangle id value is replaced with zero.\r\n *\r\n * @private\r\n * @memberof Packer.prototype\r\n * @param {RectId[]} rectIds\r\n * @returns {RectId[]}\r\n */\r\nPacker.prototype._purgeRects = ((() => {\r\n  const rectA = {};\r\n  const rectB = {};\r\n  return function(rectIds) {\r\n    let i = rectIds.length;\r\n    let ii;\r\n\r\n    while (i--) {\r\n      ii = rectIds.length;\r\n      if (!rectIds[i]) continue;\r\n      this._getRect(rectIds[i], rectA);\r\n      while (ii--) {\r\n        if (!rectIds[ii] || i === ii) continue;\r\n        if (this._isRectWithinRect(rectA, this._getRect(rectIds[ii], rectB))) {\r\n          rectIds[i] = 0;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return rectIds;\r\n  };\r\n}))();\r\n\r\n/**\r\n * Sort rectangles with top-left gravity.\r\n *\r\n * @private\r\n * @memberof Packer.prototype\r\n * @param {RectId} aId\r\n * @param {RectId} bId\r\n * @returns {Number}\r\n */\r\nPacker.prototype._sortRectsTopLeft = ((() => {\r\n  const rectA = {};\r\n  const rectB = {};\r\n  return function(aId, bId) {\r\n    this._getRect(aId, rectA);\r\n    this._getRect(bId, rectB);\r\n    // prettier-ignore\r\n    return rectA.top < rectB.top ? -1 : // eslint-disable-line\r\n           rectA.top > rectB.top ? 1 : // eslint-disable-line\r\n           rectA.left < rectB.left ? -1 : // eslint-disable-line\r\n           rectA.left > rectB.left ? 1 : 0; // eslint-disable-line\r\n  };\r\n}))();\r\n\r\n/**\r\n * Sort rectangles with left-top gravity.\r\n *\r\n * @private\r\n * @memberof Packer.prototype\r\n * @param {RectId} aId\r\n * @param {RectId} bId\r\n * @returns {Number}\r\n */\r\nPacker.prototype._sortRectsLeftTop = ((() => {\r\n  const rectA = {};\r\n  const rectB = {};\r\n  return function(aId, bId) {\r\n    this._getRect(aId, rectA);\r\n    this._getRect(bId, rectB);\r\n    // standard-ignore\r\n    return rectA.left < rectB.left ? -1 : // eslint-disable-line\r\n           rectA.left > rectB.left ? 1 : // eslint-disable-line\r\n           rectA.top < rectB.top ? -1 : // eslint-disable-line\r\n           rectA.top > rectB.top ? 1 : 0; // eslint-disable-line\r\n  };\r\n}))();\r\n\r\nexport default Packer;\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nconst htmlCollectionType = '[object HTMLCollection]';\r\nconst nodeListType = '[object NodeList]';\r\n\r\n/**\r\n * Check if a value is a node list\r\n *\r\n * @param {*} val\r\n * @returns {Boolean}\r\n */\r\nexport default function isNodeList(val) {\r\n  const type = Object.prototype.toString.call(val);\r\n  return type === htmlCollectionType || type === nodeListType;\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport isNodeList from './isNodeList.js';\r\n\r\n/**\r\n * Converts a value to an array or clones an array.\r\n *\r\n * @param {*} target\r\n * @returns {Array}\r\n */\r\nexport default function toArray(target) {\r\n  return isNodeList(target) ? Array.prototype.slice.call(target) : Array.prototype.concat(target);\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Haltu Oy\r\n * Released under the MIT license\r\n * https://github.com/haltu/muuri/blob/master/LICENSE.md\r\n */\r\n\r\nimport { Component } from 'react';\r\nimport {\r\n  eventSynchronize,\r\n  eventLayoutStart,\r\n  eventLayoutEnd,\r\n  eventAdd,\r\n  eventRemove,\r\n  eventShowStart,\r\n  eventShowEnd,\r\n  eventHideStart,\r\n  eventHideEnd,\r\n  eventFilter,\r\n  eventSort,\r\n  eventMove,\r\n  eventDestroy,\r\n  gridInstances,\r\n  namespace\r\n} from '../shared.js';\r\n\r\nimport Emitter from '../Emitter/Emitter.js';\r\nimport Item from '../Item/Item.js';\r\nimport ItemAnimate from '../Item/ItemAnimate.js';\r\nimport ItemDrag from '../Item/ItemDrag.js';\r\nimport ItemLayout from '../Item/ItemLayout.js';\r\nimport ItemMigrate from '../Item/ItemMigrate.js';\r\nimport ItemRelease from '../Item/ItemRelease.js';\r\nimport ItemVisibility from '../Item/ItemVisibility.js';\r\nimport Packer from '../Packer/Packer.js';\r\n\r\nimport addClass from '../utils/addClass.js';\r\nimport arrayMove from '../utils/arrayMove.js';\r\nimport arraySwap from '../utils/arraySwap.js';\r\nimport createUid from '../utils/createUid.js';\r\nimport debounce from '../utils/debounce.js';\r\nimport elementMatches from '../utils/elementMatches.js';\r\nimport getStyle from '../utils/getStyle.js';\r\nimport getStyleAsFloat from '../utils/getStyleAsFloat.js';\r\nimport arrayInsert from '../utils/arrayInsert.js';\r\nimport isNodeList from '../utils/isNodeList.js';\r\nimport isPlainObject from '../utils/isPlainObject.js';\r\nimport removeClass from '../utils/removeClass.js';\r\nimport toArray from '../utils/toArray.js';\r\n\r\nconst packer = new Packer();\r\nfunction noop () {}\r\n\r\n/**\r\n * Creates a new Grid instance.\r\n *\r\n * @class\r\n * @param {(HTMLElement|String)} element\r\n * @param {Object} [options]\r\n * @param {(?HTMLElement[]|NodeList|String)} [options.items]\r\n * @param {Number} [options.showDuration=300]\r\n * @param {String} [options.showEasing=\"ease\"]\r\n * @param {Object} [options.visibleStyles]\r\n * @param {Number} [options.hideDuration=300]\r\n * @param {String} [options.hideEasing=\"ease\"]\r\n * @param {Object} [options.hiddenStyles]\r\n * @param {(Function|Object)} [options.layout]\r\n * @param {Boolean} [options.layout.fillGaps=false]\r\n * @param {Boolean} [options.layout.horizontal=false]\r\n * @param {Boolean} [options.layout.alignRight=false]\r\n * @param {Boolean} [options.layout.alignBottom=false]\r\n * @param {Boolean} [options.layout.rounding=true]\r\n * @param {(Boolean|Number)} [options.layoutOnResize=100]\r\n * @param {Boolean} [options.layoutOnInit=true]\r\n * @param {Number} [options.layoutDuration=300]\r\n * @param {String} [options.layoutEasing=\"ease\"]\r\n * @param {?Object} [options.sortData=null]\r\n * @param {Boolean} [options.dragEnabled=false]\r\n * @param {?HtmlElement} [options.dragContainer=null]\r\n * @param {?Function} [options.dragStartPredicate]\r\n * @param {Number} [options.dragStartPredicate.distance=0]\r\n * @param {Number} [options.dragStartPredicate.delay=0]\r\n * @param {(Boolean|String)} [options.dragStartPredicate.handle=false]\r\n * @param {?String} [options.dragAxis]\r\n * @param {(Boolean|Function)} [options.dragSort=true]\r\n * @param {Number} [options.dragSortInterval=100]\r\n * @param {(Function|Object)} [options.dragSortPredicate]\r\n * @param {Number} [options.dragSortPredicate.threshold=50]\r\n * @param {String} [options.dragSortPredicate.action=\"move\"]\r\n * @param {Number} [options.dragReleaseDuration=300]\r\n * @param {String} [options.dragReleaseEasing=\"ease\"]\r\n * @param {Object} [options.dragHammerSettings={touchAction: \"none\"}]\r\n * @param {String} [options.containerClass=\"muuri\"]\r\n * @param {String} [options.itemClass=\"muuri-item\"]\r\n * @param {String} [options.itemVisibleClass=\"muuri-item-visible\"]\r\n * @param {String} [options.itemHiddenClass=\"muuri-item-hidden\"]\r\n * @param {String} [options.itemPositioningClass=\"muuri-item-positioning\"]\r\n * @param {String} [options.itemDraggingClass=\"muuri-item-dragging\"]\r\n * @param {String} [options.itemReleasingClass=\"muuri-item-releasing\"]\r\n */\r\nclass Grid extends Component {\r\n  constructor(element, options) {\r\n    super(element, options);\r\n    const inst = this;\r\n    let settings;\r\n    let items;\r\n    let layoutOnResize;\r\n\r\n    // Allow passing element as selector string. Store element for instance.\r\n    element = this._element = typeof element === 'string' ? document.querySelector(element) : element;\r\n\r\n    // Throw an error if the container element is not body element or does not\r\n    // exist within the body element.\r\n    if (!document.body.contains(element)) {\r\n      throw new Error('Container element must be an existing DOM element');\r\n    }\r\n\r\n    // Create instance settings by merging the options with default options.\r\n    settings = this._settings = mergeSettings(Grid.defaultOptions, options);\r\n\r\n    // Sanitize dragSort setting.\r\n    if (typeof settings.dragSort !== 'function') {\r\n      settings.dragSort = !!settings.dragSort;\r\n    }\r\n\r\n    // Create instance id and store it to the grid instances collection.\r\n    this._id = createUid();\r\n    gridInstances[this._id] = inst;\r\n\r\n    // Destroyed flag.\r\n    this._isDestroyed = false;\r\n\r\n    // The layout object (mutated on every layout).\r\n    this._layout = {\r\n      id: 0,\r\n      items: [],\r\n      slots: [],\r\n      setWidth: false,\r\n      setHeight: false,\r\n      width: 0,\r\n      height: 0\r\n    };\r\n\r\n    // Create private Emitter instance.\r\n    this._emitter = new Emitter();\r\n\r\n    // Add container element's class name.\r\n    addClass(element, settings.containerClass);\r\n\r\n    // Create initial items.\r\n    this._items = [];\r\n    items = settings.items;\r\n    if (typeof items === 'string') {\r\n      toArray(element.children).forEach(itemElement => {\r\n        if (items === '*' || elementMatches(itemElement, items)) {\r\n          inst._items.push(new Item(inst, itemElement));\r\n        }\r\n      });\r\n    } else if (Array.isArray(items) || isNodeList(items)) {\r\n      this._items = toArray(items).map(itemElement => new Item(inst, itemElement));\r\n    }\r\n\r\n    // If layoutOnResize option is a valid number sanitize it and bind the resize\r\n    // handler.\r\n    layoutOnResize = settings.layoutOnResize;\r\n    if (typeof layoutOnResize !== 'number') {\r\n      layoutOnResize = layoutOnResize === true ? 0 : -1;\r\n    }\r\n    if (layoutOnResize >= 0) {\r\n      window.addEventListener(\r\n        'resize',\r\n        (inst._resizeHandler = debounce(() => {\r\n          inst.refreshItems().layout();\r\n        }, layoutOnResize))\r\n      );\r\n    }\r\n\r\n    // Layout on init if necessary.\r\n    if (settings.layoutOnInit) {\r\n      this.layout(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Public prototype methods\r\n   * ************************\r\n   */\r\n\r\n  /**\r\n   * Bind an event listener.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {String} event\r\n   * @param {Function} listener\r\n   * @returns {Grid}\r\n   */\r\n  on(event, listener) {\r\n    this._emitter.on(event, listener);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Bind an event listener that is triggered only once.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {String} event\r\n   * @param {Function} listener\r\n   * @returns {Grid}\r\n   */\r\n  once(event, listener) {\r\n    this._emitter.once(event, listener);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Unbind an event listener.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {String} event\r\n   * @param {Function} listener\r\n   * @returns {Grid}\r\n   */\r\n  off(event, listener) {\r\n    this._emitter.off(event, listener);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the container element.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @returns {HTMLElement}\r\n   */\r\n  getElement() {\r\n    return this._element;\r\n  }\r\n\r\n  /**\r\n   * Get all items. Optionally you can provide specific targets (elements and\r\n   * indices). Note that the returned array is not the same object used by the\r\n   * instance so modifying it will not affect instance's items. All items that\r\n   * are not found are omitted from the returned array.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} [targets]\r\n   * @returns {Item[]}\r\n   */\r\n  getItems(targets) {\r\n    // Return all items immediately if no targets were provided or if the\r\n    // instance is destroyed.\r\n    if (this._isDestroyed || (!targets && targets !== 0)) {\r\n      return this._items.slice(0);\r\n    }\r\n\r\n    const ret = [];\r\n    const targetItems = toArray(targets);\r\n    let item;\r\n    let i;\r\n\r\n    // If target items are defined return filtered results.\r\n    for (i = 0; i < targetItems.length; i++) {\r\n      item = this._getItem(targetItems[i]);\r\n      item && ret.push(item);\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * Update the cached dimensions of the instance's items.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} [items]\r\n   * @returns {Grid}\r\n   */\r\n  refreshItems(items) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const targets = this.getItems(items);\r\n    let i;\r\n\r\n    for (i = 0; i < targets.length; i++) {\r\n      targets[i]._refreshDimensions();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Update the sort data of the instance's items.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} [items]\r\n   * @returns {Grid}\r\n   */\r\n  refreshSortData(items) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const targetItems = this.getItems(items);\r\n    let i;\r\n\r\n    for (i = 0; i < targetItems.length; i++) {\r\n      targetItems[i]._refreshSortData();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Synchronize the item elements to match the order of the items in the DOM.\r\n   * This comes handy if you need to keep the DOM structure matched with the\r\n   * order of the items. Note that if an item's element is not currently a child\r\n   * of the container element (if it is dragged for example) it is ignored and\r\n   * left untouched.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @returns {Grid}\r\n   */\r\n  synchronize() {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const container = this._element;\r\n    const items = this._items;\r\n    let fragment;\r\n    let element;\r\n    let i;\r\n\r\n    // Append all elements in order to the container element.\r\n    if (items.length) {\r\n      for (i = 0; i < items.length; i++) {\r\n        element = items[i]._element;\r\n        if (element.parentNode === container) {\r\n          fragment = fragment || document.createDocumentFragment();\r\n          fragment.appendChild(element);\r\n        }\r\n      }\r\n\r\n      if (fragment) container.appendChild(fragment);\r\n    }\r\n\r\n    // Emit synchronize event.\r\n    this._emit(eventSynchronize);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calculate and apply item positions.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {Boolean} [instant=false]\r\n   * @param {LayoutCallback} [onFinish]\r\n   * @returns {Grid}\r\n   */\r\n  layout(instant, onFinish) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const inst = this;\r\n    const element = this._element;\r\n    const layout = this._updateLayout();\r\n    const layoutId = layout.id;\r\n    const itemsLength = layout.items.length;\r\n    let counter = itemsLength;\r\n    const callback = typeof instant === 'function' ? instant : onFinish;\r\n    const isCallbackFunction = typeof callback === 'function';\r\n    const callbackItems = isCallbackFunction ? layout.items.slice(0) : null;\r\n    let isBorderBox;\r\n    let item;\r\n    let i;\r\n\r\n    // The finish function, which will be used for checking if all the items\r\n    // have laid out yet. After all items have finished their animations call\r\n    // callback and emit layoutEnd event. Only emit layoutEnd event if there\r\n    // hasn't been a new layout call during this layout.\r\n    function tryFinish() {\r\n      if (--counter > 0) return;\r\n      const hasLayoutChanged = inst._layout.id !== layoutId;\r\n      isCallbackFunction && callback(hasLayoutChanged, callbackItems);\r\n      if (!hasLayoutChanged && inst._hasListeners(eventLayoutEnd)) {\r\n        inst._emit(eventLayoutEnd, layout.items.slice(0));\r\n      }\r\n    };\r\n\r\n    // If grid's width or height was modified, we need to update it's cached\r\n    // dimensions. Also keep in mind that grid's cached width/height should\r\n    // always equal to what elem.getBoundingClientRect() would return, so\r\n    // therefore we need to add the grid element's borders to the dimensions if\r\n    // it's box-sizing is border-box.\r\n    if (\r\n      (layout.setHeight && typeof layout.height === 'number') ||\r\n      (layout.setWidth && typeof layout.width === 'number')\r\n    ) {\r\n      isBorderBox = getStyle(element, 'box-sizing') === 'border-box';\r\n    }\r\n    if (layout.setHeight) {\r\n      if (typeof layout.height === 'number') {\r\n        element.style.height =\r\n          `${isBorderBox ? layout.height + this._borderTop + this._borderBottom : layout.height}px`;\r\n      } else {\r\n        element.style.height = layout.height;\r\n      }\r\n    }\r\n    if (layout.setWidth) {\r\n      if (typeof layout.width === 'number') {\r\n        element.style.width =\r\n          `${isBorderBox ? layout.width + this._borderLeft + this._borderRight : layout.width}px`;\r\n      } else {\r\n        element.style.width = layout.width;\r\n      }\r\n    }\r\n\r\n    // Emit layoutStart event. Note that this is intentionally emitted after the\r\n    // container element's dimensions are set, because otherwise there would be\r\n    // no hook for reacting to container dimension changes.\r\n    if (this._hasListeners(eventLayoutStart)) {\r\n      this._emit(eventLayoutStart, layout.items.slice(0));\r\n    }\r\n\r\n    // If there are no items let's finish quickly.\r\n    if (!itemsLength) {\r\n      tryFinish();\r\n      return this;\r\n    }\r\n\r\n    // If there are items let's position them.\r\n    for (i = 0; i < itemsLength; i++) {\r\n      item = layout.items[i];\r\n      if (!item) continue;\r\n\r\n      // Update item's position.\r\n      item._left = layout.slots[i * 2];\r\n      item._top = layout.slots[i * 2 + 1];\r\n\r\n      // Layout item if it is not dragged.\r\n      item.isDragging() ? tryFinish() : item._layout.start(instant === true, tryFinish);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add new items by providing the elements you wish to add to the instance and\r\n   * optionally provide the index where you want the items to be inserted into.\r\n   * All elements that are not already children of the container element will be\r\n   * automatically appended to the container element. If an element has it's CSS\r\n   * display property set to \"none\" it will be marked as inactive during the\r\n   * initiation process. As long as the item is inactive it will not be part of\r\n   * the layout, but it will retain it's index. You can activate items at any\r\n   * point with grid.show() method. This method will automatically call\r\n   * grid.layout() if one or more of the added elements are visible. If only\r\n   * hidden items are added no layout will be called. All the new visible items\r\n   * are positioned without animation during their first layout.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {(HTMLElement|HTMLElement[])} elements\r\n   * @param {Object} [options]\r\n   * @param {Number} [options.index=-1]\r\n   * @param {Boolean} [options.isActive]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Item[]}\r\n   */\r\n  add(elements, options) {\r\n    if (this._isDestroyed || !elements) return [];\r\n\r\n    const newItems = toArray(elements);\r\n    if (!newItems.length) return newItems;\r\n\r\n    const opts = options || 0;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    const items = this._items;\r\n    let needsLayout = false;\r\n    let item;\r\n    let i;\r\n\r\n    // Map provided elements into new grid items.\r\n    for (i = 0; i < newItems.length; i++) {\r\n      item = new Item(this, newItems[i], opts.isActive);\r\n      newItems[i] = item;\r\n\r\n      // If the item to be added is active, we need to do a layout. Also, we\r\n      // need to mark the item with the skipNextAnimation flag to make it\r\n      // position instantly (without animation) during the next layout. Without\r\n      // the hack the item would animate to it's new position from the northwest\r\n      // corner of the grid, which feels a bit buggy (imho).\r\n      if (item._isActive) {\r\n        needsLayout = true;\r\n        item._layout._skipNextAnimation = true;\r\n      }\r\n    }\r\n\r\n    // Add the new items to the items collection to correct index.\r\n    arrayInsert(items, newItems, opts.index);\r\n\r\n    // Emit add event.\r\n    if (this._hasListeners(eventAdd)) {\r\n      this._emit(eventAdd, newItems.slice(0));\r\n    }\r\n\r\n    // If layout is needed.\r\n    if (needsLayout && layout) {\r\n      this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n    }\r\n\r\n    return newItems;\r\n  }\r\n\r\n  /**\r\n   * Remove items from the instance.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} items\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.removeElements=false]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Item[]}\r\n   */\r\n  remove(items, options) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const opts = options || 0;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    let needsLayout = false;\r\n    const allItems = this.getItems();\r\n    const targetItems = this.getItems(items);\r\n    const indices = [];\r\n    let item;\r\n    let i;\r\n\r\n    // Remove the individual items.\r\n    for (i = 0; i < targetItems.length; i++) {\r\n      item = targetItems[i];\r\n      indices.push(allItems.indexOf(item));\r\n      if (item._isActive) needsLayout = true;\r\n      item._destroy(opts.removeElements);\r\n    }\r\n\r\n    // Emit remove event.\r\n    if (this._hasListeners(eventRemove)) {\r\n      this._emit(eventRemove, targetItems.slice(0), indices);\r\n    }\r\n\r\n    // If layout is needed.\r\n    if (needsLayout && layout) {\r\n      this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n    }\r\n\r\n    return targetItems;\r\n  }\r\n\r\n  /**\r\n   * Show instance items.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} items\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.instant=false]\r\n   * @param {ShowCallback} [options.onFinish]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Grid}\r\n   */\r\n  show(items, options) {\r\n    if (this._isDestroyed) return this;\r\n    this._setItemsVisibility(items, true, options);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hide instance items.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} items\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.instant=false]\r\n   * @param {HideCallback} [options.onFinish]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Grid}\r\n   */\r\n  hide(items, options) {\r\n    if (this._isDestroyed) return this;\r\n    this._setItemsVisibility(items, false, options);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Filter items. Expects at least one argument, a predicate, which should be\r\n   * either a function or a string. The predicate callback is executed for every\r\n   * item in the instance. If the return value of the predicate is truthy the\r\n   * item in question will be shown and otherwise hidden. The predicate callback\r\n   * receives the item instance as it's argument. If the predicate is a string\r\n   * it is considered to be a selector and it is checked against every item\r\n   * element in the instance with the native element.matches() method. All the\r\n   * matching items will be shown and others hidden.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {(Function|String)} predicate\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.instant=false]\r\n   * @param {FilterCallback} [options.onFinish]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Grid}\r\n   */\r\n  filter(predicate, options) {\r\n    if (this._isDestroyed || !this._items.length) return this;\r\n\r\n    const itemsToShow = [];\r\n    const itemsToHide = [];\r\n    const isPredicateString = typeof predicate === 'string';\r\n    const isPredicateFn = typeof predicate === 'function';\r\n    const opts = options || 0;\r\n    const isInstant = opts.instant === true;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    const onFinish = typeof opts.onFinish === 'function' ? opts.onFinish : null;\r\n    let tryFinishCounter = -1;\r\n    let tryFinish = noop;\r\n    let item;\r\n    let i;\r\n\r\n    // If we have onFinish callback, let's create proper tryFinish callback.\r\n    if (onFinish) {\r\n      tryFinish = function() {\r\n        ++tryFinishCounter && onFinish(itemsToShow.slice(0), itemsToHide.slice(0));\r\n      };\r\n    }\r\n\r\n    // Check which items need to be shown and which hidden.\r\n    if (isPredicateFn || isPredicateString) {\r\n      for (i = 0; i < this._items.length; i++) {\r\n        item = this._items[i];\r\n        if (isPredicateFn ? predicate(item) : elementMatches(item._element, predicate)) {\r\n          itemsToShow.push(item);\r\n        } else {\r\n          itemsToHide.push(item);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Show items that need to be shown.\r\n    if (itemsToShow.length) {\r\n      this.show(itemsToShow, {\r\n        instant: isInstant,\r\n        onFinish: tryFinish,\r\n        layout: false\r\n      });\r\n    } else {\r\n      tryFinish();\r\n    }\r\n\r\n    // Hide items that need to be hidden.\r\n    if (itemsToHide.length) {\r\n      this.hide(itemsToHide, {\r\n        instant: isInstant,\r\n        onFinish: tryFinish,\r\n        layout: false\r\n      });\r\n    } else {\r\n      tryFinish();\r\n    }\r\n\r\n    // If there are any items to filter.\r\n    if (itemsToShow.length || itemsToHide.length) {\r\n      // Emit filter event.\r\n      if (this._hasListeners(eventFilter)) {\r\n        this._emit(eventFilter, itemsToShow.slice(0), itemsToHide.slice(0));\r\n      }\r\n\r\n      // If layout is needed.\r\n      if (layout) {\r\n        this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Move item to another index or in place of another item.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridSingleItemQuery} item\r\n   * @param {GridSingleItemQuery} position\r\n   * @param {Object} [options]\r\n   * @param {String} [options.action=\"move\"]\r\n   *   - Accepts either \"move\" or \"swap\".\r\n   *   - \"move\" moves the item in place of the other item.\r\n   *   - \"swap\" swaps the position of the items.\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   * @returns {Grid}\r\n   */\r\n  move(item, position, options) {\r\n    if (this._isDestroyed || this._items.length < 2) return this;\r\n\r\n    const items = this._items;\r\n    const opts = options || 0;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    const isSwap = opts.action === 'swap';\r\n    const action = isSwap ? 'swap' : 'move';\r\n    const fromItem = this._getItem(item);\r\n    const toItem = this._getItem(position);\r\n    let fromIndex;\r\n    let toIndex;\r\n\r\n    // Make sure the items exist and are not the same.\r\n    if (fromItem && toItem && fromItem !== toItem) {\r\n      // Get the indices of the items.\r\n      fromIndex = items.indexOf(fromItem);\r\n      toIndex = items.indexOf(toItem);\r\n\r\n      // Do the move/swap.\r\n      if (isSwap) {\r\n        arraySwap(items, fromIndex, toIndex);\r\n      } else {\r\n        arrayMove(items, fromIndex, toIndex);\r\n      }\r\n\r\n      // Emit move event.\r\n      if (this._hasListeners(eventMove)) {\r\n        this._emit(eventMove, {\r\n          item: fromItem,\r\n          fromIndex,\r\n          toIndex,\r\n          action\r\n        });\r\n      }\r\n\r\n      // If layout is needed.\r\n      if (layout) {\r\n        this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Send item to another Grid instance.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {GridSingleItemQuery} item\r\n   * @param {Grid} grid\r\n   * @param {GridSingleItemQuery} position\r\n   * @param {Object} [options]\r\n   * @param {HTMLElement} [options.appendTo=document.body]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layoutSender=true]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layoutReceiver=true]\r\n   * @returns {Grid}\r\n   */\r\n  send(item, grid, position, options) {\r\n    if (this._isDestroyed || grid._isDestroyed || this === grid) return this;\r\n\r\n    // Make sure we have a valid target item.\r\n    item = this._getItem(item);\r\n    if (!item) return this;\r\n\r\n    const opts = options || 0;\r\n    const container = opts.appendTo || document.body;\r\n    const layoutSender = opts.layoutSender ? opts.layoutSender : opts.layoutSender === undefined;\r\n    const layoutReceiver = opts.layoutReceiver\r\n      ? opts.layoutReceiver\r\n      : opts.layoutReceiver === undefined;\r\n\r\n    // Start the migration process.\r\n    item._migrate.start(grid, position, container);\r\n\r\n    // If migration was started successfully and the item is active, let's layout\r\n    // the grids.\r\n    if (item._migrate._isActive && item._isActive) {\r\n      if (layoutSender) {\r\n        this.layout(\r\n          layoutSender === 'instant',\r\n          typeof layoutSender === 'function' ? layoutSender : undefined\r\n        );\r\n      }\r\n      if (layoutReceiver) {\r\n        grid.layout(\r\n          layoutReceiver === 'instant',\r\n          typeof layoutReceiver === 'function' ? layoutReceiver : undefined\r\n        );\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Destroy the instance.\r\n   *\r\n   * @public\r\n   * @memberof Grid.prototype\r\n   * @param {Boolean} [removeElements=false]\r\n   * @returns {Grid}\r\n   */\r\n  destroy(removeElements) {\r\n    if (this._isDestroyed) return this;\r\n\r\n    const container = this._element;\r\n    const items = this._items.slice(0);\r\n    let i;\r\n\r\n    // Unbind window resize event listener.\r\n    if (this._resizeHandler) {\r\n      window.removeEventListener('resize', this._resizeHandler);\r\n    }\r\n\r\n    // Destroy items.\r\n    for (i = 0; i < items.length; i++) {\r\n      items[i]._destroy(removeElements);\r\n    }\r\n\r\n    // Restore container.\r\n    removeClass(container, this._settings.containerClass);\r\n    container.style.height = '';\r\n    container.style.width = '';\r\n\r\n    // Emit destroy event and unbind all events.\r\n    this._emit(eventDestroy);\r\n    this._emitter.destroy();\r\n\r\n    // Remove reference from the grid instances collection.\r\n    gridInstances[this._id] = undefined;\r\n\r\n    // Flag instance as destroyed.\r\n    this._isDestroyed = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Private prototype methods\r\n   * *************************\r\n   */\r\n\r\n  /**\r\n   * Get instance's item by element or by index. Target can also be an Item\r\n   * instance in which case the function returns the item if it exists within\r\n   * related Grid instance. If nothing is found with the provided target, null\r\n   * is returned.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @param {GridSingleItemQuery} [target]\r\n   * @returns {?Item}\r\n   */\r\n  _getItem(target) {\r\n    // If no target is specified or the instance is destroyed, return null.\r\n    if (this._isDestroyed || (!target && target !== 0)) {\r\n      return null;\r\n    }\r\n\r\n    // If target is number return the item in that index. If the number is lower\r\n    // than zero look for the item starting from the end of the items array. For\r\n    // example -1 for the last item, -2 for the second last item, etc.\r\n    if (typeof target === 'number') {\r\n      return this._items[target > -1 ? target : this._items.length + target] || null;\r\n    }\r\n\r\n    // If the target is an instance of Item return it if it is attached to this\r\n    // Grid instance, otherwise return null.\r\n    if (target instanceof Item) {\r\n      return target._gridId === this._id ? target : null;\r\n    }\r\n\r\n    // In other cases let's assume that the target is an element, so let's try\r\n    // to find an item that matches the element and return it. If item is not\r\n    // found return null.\r\n    /** @todo This could be made a lot faster by using Map/WeakMap of elements. */\r\n    for (let i = 0; i < this._items.length; i++) {\r\n      if (this._items[i]._element === target) {\r\n        return this._items[i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Recalculates and updates instance's layout data.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @returns {LayoutData}\r\n   */\r\n  _updateLayout() {\r\n    const layout = this._layout;\r\n    const settings = this._settings.layout;\r\n    let width;\r\n    let height;\r\n    let newLayout;\r\n    let i;\r\n\r\n    // Let's increment layout id.\r\n    ++layout.id;\r\n\r\n    // Let's update layout items\r\n    layout.items.length = 0;\r\n    for (i = 0; i < this._items.length; i++) {\r\n      if (this._items[i]._isActive) layout.items.push(this._items[i]);\r\n    }\r\n\r\n    // Let's make sure we have the correct container dimensions.\r\n    this._refreshDimensions();\r\n\r\n    // Calculate container width and height (without borders).\r\n    width = this._width - this._borderLeft - this._borderRight;\r\n    height = this._height - this._borderTop - this._borderBottom;\r\n\r\n    // Calculate new layout.\r\n    if (typeof settings === 'function') {\r\n      newLayout = settings(layout.items, width, height);\r\n    } else {\r\n      newLayout = packer.getLayout(layout.items, width, height, layout.slots, settings);\r\n    }\r\n\r\n    // Let's update the grid's layout.\r\n    layout.slots = newLayout.slots;\r\n    layout.setWidth = Boolean(newLayout.setWidth);\r\n    layout.setHeight = Boolean(newLayout.setHeight);\r\n    layout.width = newLayout.width;\r\n    layout.height = newLayout.height;\r\n\r\n    return layout;\r\n  }\r\n\r\n  /**\r\n   * Emit a grid event.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @param {String} event\r\n   * @param {...*} [arg]\r\n   */\r\n  _emit() {\r\n    if (this._isDestroyed) return;\r\n    this._emitter.emit(...arguments);\r\n  }\r\n\r\n  /**\r\n   * Check if there are any events listeners for an event.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @param {String} event\r\n   * @returns {Boolean}\r\n   */\r\n  _hasListeners(event) {\r\n    const listeners = this._emitter._events[event];\r\n    return !!(listeners && listeners.length);\r\n  }\r\n\r\n  /**\r\n   * Update container's width, height and offsets.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   */\r\n  _updateBoundingRect() {\r\n    const element = this._element;\r\n    const rect = element.getBoundingClientRect();\r\n    this._width = rect.width;\r\n    this._height = rect.height;\r\n    this._left = rect.left;\r\n    this._top = rect.top;\r\n  }\r\n\r\n  /**\r\n   * Update container's border sizes.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @param {Boolean} left\r\n   * @param {Boolean} right\r\n   * @param {Boolean} top\r\n   * @param {Boolean} bottom\r\n   */\r\n  _updateBorders(left, right, top, bottom) {\r\n    const element = this._element;\r\n    if (left) this._borderLeft = getStyleAsFloat(element, 'border-left-width');\r\n    if (right) this._borderRight = getStyleAsFloat(element, 'border-right-width');\r\n    if (top) this._borderTop = getStyleAsFloat(element, 'border-top-width');\r\n    if (bottom) this._borderBottom = getStyleAsFloat(element, 'border-bottom-width');\r\n  }\r\n\r\n  /**\r\n   * Refresh all of container's internal dimensions and offsets.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   */\r\n  _refreshDimensions() {\r\n    this._updateBoundingRect();\r\n    this._updateBorders(1, 1, 1, 1);\r\n  }\r\n\r\n  /**\r\n   * Show or hide Grid instance's items.\r\n   *\r\n   * @private\r\n   * @memberof Grid.prototype\r\n   * @param {GridMultiItemQuery} items\r\n   * @param {Boolean} toVisible\r\n   * @param {Object} [options]\r\n   * @param {Boolean} [options.instant=false]\r\n   * @param {(ShowCallback|HideCallback)} [options.onFinish]\r\n   * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n   */\r\n  _setItemsVisibility(items, toVisible, options) {\r\n    const grid = this;\r\n    const targetItems = this.getItems(items);\r\n    const opts = options || 0;\r\n    const isInstant = opts.instant === true;\r\n    const callback = opts.onFinish;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    let counter = targetItems.length;\r\n    const startEvent = toVisible ? eventShowStart : eventHideStart;\r\n    const endEvent = toVisible ? eventShowEnd : eventHideEnd;\r\n    const method = toVisible ? 'show' : 'hide';\r\n    let needsLayout = false;\r\n    const completedItems = [];\r\n    const hiddenItems = [];\r\n    let item;\r\n    let i;\r\n\r\n    // If there are no items call the callback, but don't emit any events.\r\n    if (!counter) {\r\n      if (typeof callback === 'function') callback(targetItems);\r\n      return;\r\n    }\r\n\r\n    // Emit showStart/hideStart event.\r\n    if (this._hasListeners(startEvent)) {\r\n      this._emit(startEvent, targetItems.slice(0));\r\n    }\r\n\r\n    // Show/hide items.\r\n    for (i = 0; i < targetItems.length; i++) {\r\n      item = targetItems[i];\r\n\r\n      // If inactive item is shown or active item is hidden we need to do\r\n      // layout.\r\n      if ((toVisible && !item._isActive) || (!toVisible && item._isActive)) {\r\n        needsLayout = true;\r\n      }\r\n\r\n      // If inactive item is shown we also need to do a little hack to make the\r\n      // item not animate it's next positioning (layout).\r\n      if (toVisible && !item._isActive) {\r\n        item._layout._skipNextAnimation = true;\r\n      }\r\n\r\n      // If a hidden item is being shown we need to refresh the item's\r\n      // dimensions.\r\n      if (toVisible && item._visibility._isHidden) {\r\n        hiddenItems.push(item);\r\n      }\r\n\r\n      // Show/hide the item.\r\n      item._visibility[method](isInstant, (interrupted, item) => {\r\n        // If the current item's animation was not interrupted add it to the\r\n        // completedItems array.\r\n        if (!interrupted) completedItems.push(item);\r\n\r\n        // If all items have finished their animations call the callback\r\n        // and emit showEnd/hideEnd event.\r\n        if (--counter < 1) {\r\n          if (typeof callback === 'function') callback(completedItems.slice(0));\r\n          if (grid._hasListeners(endEvent)) grid._emit(endEvent, completedItems.slice(0));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Refresh hidden items.\r\n    if (hiddenItems.length) this.refreshItems(hiddenItems);\r\n\r\n    // Layout if needed.\r\n    if (needsLayout && layout) {\r\n      this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Public properties\r\n * *****************\r\n */\r\n\r\n/**\r\n * @see Item\r\n */\r\nGrid.Item = Item;\r\n\r\n/**\r\n * @see ItemLayout\r\n */\r\nGrid.ItemLayout = ItemLayout;\r\n\r\n/**\r\n * @see ItemVisibility\r\n */\r\nGrid.ItemVisibility = ItemVisibility;\r\n\r\n/**\r\n * @see ItemRelease\r\n */\r\nGrid.ItemRelease = ItemRelease;\r\n\r\n/**\r\n * @see ItemMigrate\r\n */\r\nGrid.ItemMigrate = ItemMigrate;\r\n\r\n/**\r\n * @see ItemAnimate\r\n */\r\nGrid.ItemAnimate = ItemAnimate;\r\n\r\n/**\r\n * @see ItemDrag\r\n */\r\nGrid.ItemDrag = ItemDrag;\r\n\r\n/**\r\n * @see Emitter\r\n */\r\nGrid.Emitter = Emitter;\r\n\r\n/**\r\n * Default options for Grid instance.\r\n *\r\n * @public\r\n * @memberof Grid\r\n */\r\nGrid.defaultOptions = {\r\n  // Item elements\r\n  items: '*',\r\n\r\n  // Default show animation\r\n  showDuration: 300,\r\n  showEasing: 'ease',\r\n\r\n  // Default hide animation\r\n  hideDuration: 300,\r\n  hideEasing: 'ease',\r\n\r\n  // Item's visible/hidden state styles\r\n  visibleStyles: {\r\n    opacity: '1',\r\n    transform: 'scale(1)'\r\n  },\r\n  hiddenStyles: {\r\n    opacity: '0',\r\n    transform: 'scale(0.5)'\r\n  },\r\n\r\n  // Layout\r\n  layout: {\r\n    fillGaps: false,\r\n    horizontal: false,\r\n    alignRight: false,\r\n    alignBottom: false,\r\n    rounding: true\r\n  },\r\n  layoutOnResize: 100,\r\n  layoutOnInit: true,\r\n  layoutDuration: 300,\r\n  layoutEasing: 'ease',\r\n\r\n  // Sorting\r\n  sortData: null,\r\n\r\n  // Drag & Drop\r\n  dragEnabled: false,\r\n  dragContainer: null,\r\n  dragStartPredicate: {\r\n    distance: 0,\r\n    delay: 0,\r\n    handle: false\r\n  },\r\n  dragAxis: null,\r\n  dragSort: true,\r\n  dragSortInterval: 100,\r\n  dragSortPredicate: {\r\n    threshold: 50,\r\n    action: 'move'\r\n  },\r\n  dragReleaseDuration: 300,\r\n  dragReleaseEasing: 'ease',\r\n  dragHammerSettings: {\r\n    touchAction: 'none'\r\n  },\r\n\r\n  // Classnames\r\n  containerClass: 'muuri',\r\n  itemClass: 'muuri-item',\r\n  itemVisibleClass: 'muuri-item-shown',\r\n  itemHiddenClass: 'muuri-item-hidden',\r\n  itemPositioningClass: 'muuri-item-positioning',\r\n  itemDraggingClass: 'muuri-item-dragging',\r\n  itemReleasingClass: 'muuri-item-releasing'\r\n};\r\n\r\n/**\r\n * Sort items. There are three ways to sort the items. The first is simply by\r\n * providing a function as the comparer which works identically to native\r\n * array sort. Alternatively you can sort by the sort data you have provided\r\n * in the instance's options. Just provide the sort data key(s) as a string\r\n * (separated by space) and the items will be sorted based on the provided\r\n * sort data keys. Lastly you have the opportunity to provide a presorted\r\n * array of items which will be used to sync the internal items array in the\r\n * same order.\r\n *\r\n * @public\r\n * @memberof Grid.prototype\r\n * @param {(Function|Item[]|String|String[])} comparer\r\n * @param {Object} [options]\r\n * @param {Boolean} [options.descending=false]\r\n * @param {(Boolean|LayoutCallback|String)} [options.layout=true]\r\n * @returns {Grid}\r\n */\r\nGrid.prototype.sort = ((() => {\r\n  let sortComparer;\r\n  let isDescending;\r\n  let origItems;\r\n  let indexMap;\r\n\r\n  function parseCriteria(data) {\r\n    return data\r\n      .trim()\r\n      .split(' ')\r\n      .map(val => val.split(':'));\r\n  };\r\n\r\n  function getIndexMap(items) {\r\n    const ret = {};\r\n    for (let i = 0; i < items.length; i++) {\r\n      ret[items[i]._id] = i;\r\n    }\r\n    return ret;\r\n  };\r\n\r\n  function compareIndices(itemA, itemB) {\r\n    const indexA = indexMap[itemA._id];\r\n    const indexB = indexMap[itemB._id];\r\n    return isDescending ? indexB - indexA : indexA - indexB;\r\n  };\r\n\r\n  function defaultComparer(a, b) {\r\n    let result = 0;\r\n    let criteriaName;\r\n    let criteriaOrder;\r\n    let valA;\r\n    let valB;\r\n\r\n    // Loop through the list of sort criteria.\r\n    for (let i = 0; i < sortComparer.length; i++) {\r\n      // Get the criteria name, which should match an item's sort data key.\r\n      criteriaName = sortComparer[i][0];\r\n      criteriaOrder = sortComparer[i][1];\r\n\r\n      // Get items' cached sort values for the criteria. If the item has no sort\r\n      // data let's update the items sort data (this is a lazy load mechanism).\r\n      valA = (a._sortData ? a : a._refreshSortData())._sortData[criteriaName];\r\n      valB = (b._sortData ? b : b._refreshSortData())._sortData[criteriaName];\r\n\r\n      // Sort the items in descending order if defined so explicitly. Otherwise\r\n      // sort items in ascending order.\r\n      if (criteriaOrder === 'desc' || (!criteriaOrder && isDescending)) {\r\n        result = valB < valA ? -1 : valB > valA ? 1 : 0;\r\n      } else {\r\n        result = valA < valB ? -1 : valA > valB ? 1 : 0;\r\n      }\r\n\r\n      // If we have -1 or 1 as the return value, let's return it immediately.\r\n      if (result) return result;\r\n    }\r\n\r\n    // If values are equal let's compare the item indices to make sure we\r\n    // have a stable sort.\r\n    if (!result) {\r\n      if (!indexMap) indexMap = getIndexMap(origItems);\r\n      result = compareIndices(a, b);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  function customComparer(a, b) {\r\n    let result = sortComparer(a, b);\r\n    // If descending let's invert the result value.\r\n    if (isDescending && result) result = -result;\r\n    // If we have a valid result (not zero) let's return it right away.\r\n    if (result) return result;\r\n    // If result is zero let's compare the item indices to make sure we have a\r\n    // stable sort.\r\n    if (!indexMap) indexMap = getIndexMap(origItems);\r\n    return compareIndices(a, b);\r\n  };\r\n\r\n  return function(comparer, options) {\r\n    if (this._isDestroyed || this._items.length < 2) return this;\r\n\r\n    const items = this._items;\r\n    const opts = options || 0;\r\n    const layout = opts.layout ? opts.layout : opts.layout === undefined;\r\n    let i;\r\n\r\n    // Setup parent scope data.\r\n    sortComparer = comparer;\r\n    isDescending = !!opts.descending;\r\n    origItems = items.slice(0);\r\n    indexMap = null;\r\n\r\n    // If function is provided do a native array sort.\r\n    if (typeof sortComparer === 'function') {\r\n      items.sort(customComparer);\r\n    }\r\n    // Otherwise if we got a string, let's sort by the sort data as provided in\r\n    // the instance's options.\r\n    else if (typeof sortComparer === 'string') {\r\n      sortComparer = parseCriteria(comparer);\r\n      items.sort(defaultComparer);\r\n    }\r\n    // Otherwise if we got an array, let's assume it's a presorted array of the\r\n    // items and order the items based on it.\r\n    else if (Array.isArray(sortComparer)) {\r\n      if (sortComparer.length !== items.length) {\r\n        throw new Error(`[${namespace}] sort reference items do not match with grid items.`);\r\n      }\r\n      for (i = 0; i < items.length; i++) {\r\n        if (!sortComparer.includes(items[i])) {\r\n          throw new Error(`[${namespace}] sort reference items do not match with grid items.`);\r\n        }\r\n        items[i] = sortComparer[i];\r\n      }\r\n      if (isDescending) items.reverse();\r\n    }\r\n    // Otherwise let's just skip it, nothing we can do here.\r\n    else {\r\n      /** @todo Maybe throw an error here? */\r\n      return this;\r\n    }\r\n\r\n    // Emit sort event.\r\n    if (this._hasListeners(eventSort)) {\r\n      this._emit(eventSort, items.slice(0), origItems);\r\n    }\r\n\r\n    // If layout is needed.\r\n    if (layout) {\r\n      this.layout(layout === 'instant', typeof layout === 'function' ? layout : undefined);\r\n    }\r\n\r\n    return this;\r\n  };\r\n}))();\r\n\r\n/**\r\n * Private helpers\r\n * ***************\r\n */\r\n\r\n/**\r\n * Merge default settings with user settings. The returned object is a new\r\n * object with merged values. The merging is a deep merge meaning that all\r\n * objects and arrays within the provided settings objects will be also merged\r\n * so that modifying the values of the settings object will have no effect on\r\n * the returned object.\r\n *\r\n * @param {Object} defaultSettings\r\n * @param {Object} [userSettings]\r\n * @returns {Object} Returns a new object.\r\n */\r\nfunction mergeSettings(defaultSettings, userSettings) {\r\n  // Create a fresh copy of default settings.\r\n  let ret = mergeObjects({}, defaultSettings);\r\n\r\n  // Merge user settings to default settings.\r\n  if (userSettings) {\r\n    ret = mergeObjects(ret, userSettings);\r\n  }\r\n\r\n  // Handle visible/hidden styles manually so that the whole object is\r\n  // overridden instead of the props.\r\n  ret.visibleStyles = (userSettings || 0).visibleStyles || (defaultSettings || 0).visibleStyles;\r\n  ret.hiddenStyles = (userSettings || 0).hiddenStyles || (defaultSettings || 0).hiddenStyles;\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Merge two objects recursively (deep merge). The source object's properties\r\n * are merged to the target object.\r\n *\r\n * @param {Object} target\r\n *   - The target object.\r\n * @param {Object} source\r\n *   - The source object.\r\n * @returns {Object} Returns the target object.\r\n */\r\nfunction mergeObjects(target, source) {\r\n  const sourceKeys = Object.keys(source);\r\n  const length = sourceKeys.length;\r\n  let isSourceObject;\r\n  let propName;\r\n  let i;\r\n\r\n  for (i = 0; i < length; i++) {\r\n    propName = sourceKeys[i];\r\n    isSourceObject = isPlainObject(source[propName]);\r\n\r\n    // If target and source values are both objects, merge the objects and\r\n    // assign the merged value to the target property.\r\n    if (isPlainObject(target[propName]) && isSourceObject) {\r\n      target[propName] = mergeObjects(mergeObjects({}, target[propName]), source[propName]);\r\n      continue;\r\n    }\r\n\r\n    // If source's value is object and target's is not let's clone the object as\r\n    // the target's value.\r\n    if (isSourceObject) {\r\n      target[propName] = mergeObjects({}, source[propName]);\r\n      continue;\r\n    }\r\n\r\n    // If source's value is an array let's clone the array as the target's\r\n    // value.\r\n    if (Array.isArray(source[propName])) {\r\n      target[propName] = source[propName].slice(0);\r\n      continue;\r\n    }\r\n\r\n    // In all other cases let's just directly assign the source's value as the\r\n    // target's value.\r\n    target[propName] = source[propName];\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nexport default Grid;\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Grid from './Grid/Grid';\r\n\r\nexport default class MuuriGrid extends Component {\r\n  static propTypes = {\r\n    node: PropTypes.node.isRequired,\r\n    defaultOptions: PropTypes.object\r\n  }\r\n\r\n  constructor (props) {\r\n    super(props);\r\n\r\n    this.grid = new Grid(props.node, props.defaultOptions);\r\n    this.getMethod = this.getMethod.bind(this);\r\n    this.getEvent = this.getEvent.bind(this);\r\n    this.getItemMethod = this.getItemMethod.bind(this);\r\n  }\r\n\r\n  getMethod (method, param1, param2, param3, param4) {\r\n    try {\r\n      let result;\r\n\r\n      switch (method) {\r\n        case 'getElement':\r\n          result = this.grid.getElement();\r\n          break;\r\n        case 'getItems':\r\n          result = this.grid.getItems(param1);\r\n          break;\r\n        case 'refreshItems':\r\n          result = this.grid.refreshItems(param1);\r\n          break;\r\n        case 'refreshSortData':\r\n          result = this.grid.refreshSortData(param1);\r\n          break;\r\n        case 'synchronize':\r\n          result = this.grid.synchronize();\r\n          break;\r\n        case 'layout':\r\n          result = this.grid.layout(param1, param2);\r\n          break;\r\n        case 'add':\r\n          result = this.grid.add(param1, param2);\r\n          break;\r\n        case 'remove':\r\n          result = this.grid.remove(param1, param2);\r\n          break;\r\n        case 'show':\r\n          result = this.grid.show(param1, param2);\r\n          break;\r\n        case 'hide':\r\n          result = this.grid.hide(param1, param2);\r\n          break;\r\n        case 'filter':\r\n          result = this.grid.filter(param1, param2);\r\n          break;\r\n        case 'sort':\r\n          result = this.grid.sort(param1, param2);\r\n          break;\r\n        case 'move':\r\n          result = this.grid.move(param1, param2, param3);\r\n          break;\r\n        case 'send':\r\n          result = this.grid.send(param1, param2, param3, param4);\r\n          break;\r\n        case 'on':\r\n          result = this.grid.on(param1, param2);\r\n          break;\r\n        case 'once':\r\n          result = this.grid.once(param1, param2);\r\n          break;\r\n        case 'off':\r\n          result = this.grid.off(param1, param2);\r\n          break;\r\n        case 'destroy':\r\n          result = this.grid.destroy(param1);\r\n          break;\r\n        default:\r\n          result = null;\r\n          console.error(`Invalid 'Method' provided: ${method}`);\r\n          console.error(`Check the Muuri documentation for a list of valid methods.`);\r\n          break;\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error(`The following error occured in 'getMethod()': ${error}`);\r\n    }\r\n  }\r\n\r\n  getEvent (event, param1, param2, callback) {\r\n    const eventsList = [\r\n      'synchronize',\r\n      'layoutStart',\r\n      'layoutEnd',\r\n      'add',\r\n      'remove',\r\n      'showStart',\r\n      'showEnd',\r\n      'hideStart',\r\n      'hideEnd',\r\n      'filter',\r\n      'sort',\r\n      'move',\r\n      'send',\r\n      'beforeSend',\r\n      'receive',\r\n      'beforeReceive',\r\n      'dragInit',\r\n      'dragStart',\r\n      'dragMove',\r\n      'dragScroll',\r\n      'dragEnd',\r\n      'dragReleaseStart',\r\n      'dragReleaseEnd',\r\n      'destroy'\r\n    ];\r\n\r\n    if (event === undefined || event === null || eventsList.indexOf(event) === -1) {\r\n      console.error(`Invalid event provided to 'getEvent()': ${event}`);\r\n    } else {\r\n      try {\r\n        this.grid.on(event, (param1, param2) => {\r\n          if (callback) {\r\n            callback(param1, param2);\r\n          }\r\n\r\n          this.grid.synchronize();\r\n        });\r\n      } catch (error) {\r\n        console.error(`The following error occured in 'getEvent()': ${error}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  getItemMethod (method, item) {\r\n    try {\r\n      let result;\r\n\r\n      switch (method) {\r\n        case 'getGrid':\r\n          result = item.getGrid();\r\n          break;\r\n        case 'getElement':\r\n          result = item.getElement();\r\n          break;\r\n        case 'getWidth':\r\n          result = item.getWidth();\r\n          break;\r\n        case 'getHeight':\r\n          result = item.getHeight();\r\n          break;\r\n        case 'getMargin':\r\n          result = item.getMargin();\r\n          break;\r\n        case 'getPosition':\r\n          result = item.getPosition();\r\n          break;\r\n        case 'isActive':\r\n          result = item.isActive();\r\n          break;\r\n        case 'isVisible':\r\n          result = item.isVisible();\r\n          break;\r\n        case 'isShowing':\r\n          result = item.isShowing();\r\n          break;\r\n        case 'isHiding':\r\n          result = item.isHiding();\r\n          break;\r\n        case 'isPositioning':\r\n          result = item.isPositioning();\r\n          break;\r\n        case 'isDragging':\r\n          result = item.isDragging();\r\n          break;\r\n        case 'isReleasing':\r\n          result = item.isReleasing();\r\n          break;\r\n        case 'isDestroyed':\r\n          result = item.isDestroyed();\r\n          break;\r\n        default:\r\n          result = null;\r\n          console.error(`Invalid 'Item Event' provided: ${method}`);\r\n          console.error(`Check the Muuri documentation for a list of valid item events.`);\r\n          break;\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error(`The following error occured in 'getItemMethod()': ${error}`);\r\n    }\r\n  }\r\n}\r\n"],"names":["namespace","gridInstances","eventSynchronize","eventLayoutStart","eventLayoutEnd","eventAdd","eventRemove","eventShowStart","eventShowEnd","eventHideStart","eventHideEnd","eventFilter","eventSort","eventMove","eventSend","eventBeforeSend","eventReceive","eventBeforeReceive","eventDragInit","eventDragStart","eventDragMove","eventDragScroll","eventDragEnd","eventDragReleaseStart","eventDragReleaseEnd","eventDestroy","Emitter","_events","_queue","_counter","_isDestroyed","event","listener","listeners","push","callback","off","arguments","bind","on","length","i","splice","arg1","arg2","arg3","queue","qLength","aLength","events","undefined","Component","isTransformSupported","transformStyle","transformProp","style","styleCap","forEach","prefix","propName","document","documentElement","toLowerCase","stylesCache","WeakMap","getStyle","element","styles","get","window","getComputedStyle","set","getPropertyValue","styleNameRegEx","getStyleName","string","replace","setStyles","prop","ItemAnimate","_element","_animation","_callback","_props","_values","_keyframes","_options","_onFinish","propsFrom","propsTo","options","animation","currentProps","currentValues","opts","cancelAnimation","propCount","propIndex","indexOf","cancel","onFinish","animKeyframes","animOptions","duration","easing","animate","onfinish","propValue","stop","define","rafFallback","cb","setTimeout","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","Ticker","_nextTick","_reads","_writes","_batch","_batchReads","_batchWrites","_flush","id","readCallback","writeCallback","isImportant","currentIndex","unshift","reads","writes","batch","batchReads","batchWrites","ticker","layoutTick","visibilityTick","moveTick","scrollTick","addLayoutTick","itemId","add","cancelLayoutTick","addVisibilityTick","cancelVisibilityTick","addMoveTick","cancelMoveTick","addScrollTick","cancelScrollTick","proto","Element","prototype","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","elementMatches","el","selector","call","addClassModern","className","classList","addClassLegacy","normalizeArrayIndex","array","index","isMigration","maxIndex","Math","max","arrayMove","fromIndex","toIndex","from","to","arraySwap","withIndex","indexA","indexB","temp","actionCancel","actionFinish","debounce","fn","wait","timeout","action","clearTimeout","isTransformed","transform","display","getContainingBlock","includeSelf","ret","parentElement","getStyleAsFloat","parseFloat","offsetA","offsetB","offsetDiff","getOffset","offsetData","rect","left","top","pageXOffset","pageYOffset","self","getBoundingClientRect","getOffsetDiff","elemA","elemB","compareContainingBlocks","translateData","getTranslate","x","y","matrixData","split","getTranslateString","tempArray","arrayInsert","items","startIndex","concat","objectType","toString","Object","isPlainObject","val","removeClassModern","remove","removeClassLegacy","trim","hasTransformLeak","checkTransformLeak","startPredicateInactive","startPredicatePending","startPredicateResolved","startPredicateRejected","ItemDrag","item","Hammer","Error","drag","grid","getGrid","settings","_settings","hammer","startPredicate","dragStartPredicate","defaultStartPredicate","startPredicateState","startPredicateResult","_item","_gridId","_id","_hammer","Manager","_isMigrating","_reset","_onScroll","_prepareMove","_applyMove","_prepareScroll","_applyScroll","_checkOverlap","_forceResolveStartPredicate","_onStart","_checkOverlapDebounce","dragSortInterval","Pan","DIRECTION_ALL","Press","dragHammerSettings","e","_isActive","_onMove","isResolved","_onEnd","addEventListener","preventDefault","_getGrid","_finishMigration","_unbindScrollListeners","parentNode","appendChild","_gridX","_gridY","itemDraggingClass","destroy","removeEventListener","_container","_containingBlock","_lastEvent","_lastScrollEvent","_scrollers","_left","_top","_elementClientX","_elementClientY","_containerDiffX","_containerDiffY","gridContainer","dragContainer","scrollers","containerScrollers","includes","config","_startPredicateData","abs","distance","delay","handle","predicate","handleElement","changedPointers","target","pointer","pageX","pageY","handleRect","handleLeft","handleTop","handleWidth","handleHeight","width","height","_resetStartPredicate","isClick","openAnchorHref","delayTimer","result","currentGrid","targetGrid","targetIndex","sortAction","dragSortPredicate","defaultSortPredicate","_items","_hasListeners","_emit","layout","_sortData","release","_release","isActive","targetGridElement","targetSettings","targetContainer","currentSettings","currentContainer","translate","itemClass","itemVisibleClass","itemHiddenClass","_refreshDimensions","_refreshSortData","_drag","dragEnabled","_child","removeAttribute","visibleStyles","hiddenStyles","start","migrate","_migrate","containingBlock","currentLeft","currentTop","elementRect","hasDragContainer","isPositioning","_layout","isReleasing","_bindScrollListeners","axis","dragAxis","xDiff","deltaX","yDiff","deltaY","dragSort","_setupStartPredicate","isFinal","_finishStartPredicate","_getStartPredicateHandle","_resolveStartPredicate","itemRect","targetRect","returnData","rootGridArray","getTargetGrid","rootGrid","threshold","bestScore","gridScore","grids","Array","isArray","_updateBoundingRect","_width","_height","getRectOverlapScore","sortThreshold","gridOffsetLeft","gridOffsetTop","matchScore","matchIndex","hasValidTargets","score","_marginLeft","_marginTop","_updateBorders","_borderLeft","_borderTop","Infinity","a","b","min","maxWidth","maxHeight","getScrollParents","data","parent","isScrollable","overflow","deltaTime","tagName","href","getAttribute","open","location","body","elems","map","elem","isInner","createElement","position","visibility","outer","inner","removeChild","Queue","singleCallback","snapshot","slice","ItemLayout","_isInterrupted","_currentStyles","_targetStyles","_currentLeft","_currentTop","_offsetLeft","_offsetTop","_skipNextAnimation","_animateOptions","_finish","_setupAnimation","_startAnimation","instant","gridSettings","isJustReleased","_isPositioningStarted","animDuration","dragReleaseDuration","layoutDuration","animEasing","dragReleaseEasing","layoutEasing","animEnabled","isAnimating","flush","_updateOffsets","_updateTargetStyles","_animate","processCallbackQueue","targetStyles","itemPositioningClass","addClass","tempStyles","ItemMigrate","container","isVisible","targetElement","targetItems","targetItem","containerDiff","translateX","translateY","_getItem","_visibility","_stopAnimation","abort","currentStyles","gridElement","ItemRelease","itemReleasingClass","getCurrentStyles","current","ItemVisibility","_isHidden","_isHiding","_isShowing","_finishShow","_finishHide","toVisible","parseInt","showDuration","hideDuration","showEasing","hideEasing","isInstant","_animateChild","finishStyles","createUid","Item","children","_marginRight","_marginBottom","getters","sortData","removeElement","Packer","_slots","_slotSizes","_freeSlots","_newSlots","_rectItem","_rectStore","_rectId","_sortRectsLeftTop","_sortRectsTopLeft","slots","fillGaps","isHorizontal","horizontal","alignRight","alignBottom","rounding","slotSizes","round","setWidth","setHeight","_addSlot","rectId","rectStore","rectItem","leeway","itemSlot","trackSize","freeSlots","newSlots","potentialSlots","ignoreCurrentSlots","ii","_getRect","_addRect","_splitRect","_purgeRects","sort","results","hole","_doRectsOverlap","rectA","rectB","rectIds","_isRectWithinRect","aId","bId","htmlCollectionType","nodeListType","isNodeList","type","toArray","packer","noop","Grid","inst","layoutOnResize","querySelector","contains","mergeSettings","defaultOptions","_emitter","containerClass","itemElement","_resizeHandler","refreshItems","layoutOnInit","once","targets","getItems","fragment","createDocumentFragment","_updateLayout","layoutId","itemsLength","counter","isCallbackFunction","callbackItems","isBorderBox","tryFinish","hasLayoutChanged","_borderBottom","_borderRight","isDragging","elements","newItems","needsLayout","allItems","indices","_destroy","removeElements","_setItemsVisibility","itemsToShow","itemsToHide","isPredicateString","isPredicateFn","tryFinishCounter","show","hide","isSwap","fromItem","toItem","appendTo","layoutSender","layoutReceiver","newLayout","getLayout","Boolean","emit","right","bottom","startEvent","endEvent","method","completedItems","hiddenItems","interrupted","sortComparer","isDescending","origItems","indexMap","parseCriteria","getIndexMap","compareIndices","itemA","itemB","defaultComparer","criteriaName","criteriaOrder","valA","valB","customComparer","comparer","descending","reverse","defaultSettings","userSettings","mergeObjects","source","sourceKeys","keys","isSourceObject","MuuriGrid","props","node","getMethod","getEvent","getItemMethod","param1","param2","param3","param4","getElement","refreshSortData","synchronize","filter","move","send","error","eventsList","getWidth","getHeight","getMargin","getPosition","isShowing","isHiding","isDestroyed","propTypes","PropTypes","isRequired","object"],"mappings":"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"}